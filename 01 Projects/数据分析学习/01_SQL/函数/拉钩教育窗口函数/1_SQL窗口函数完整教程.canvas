{
	"nodes":[
		{"id":"title","type":"text","text":"# SQLé«˜çº§åº”ç”¨ï¼šçª—å£å‡½æ•°è¯¦è§£\n\n**æ‹‰å‹¾æ•™è‚²æ•°æ®åˆ†æè®­ç»ƒè¥** | ç»å…¸è€å¸ˆ | 2021-05-18\n\n> **é€šä¿—ç†è§£**ï¼šçª—å£å‡½æ•°å°±åƒä¸€ä¸ªä¼šç§»åŠ¨çš„æ”¾å¤§é•œï¼Œå¸®æˆ‘ä»¬åœ¨æ•°æ®è¡¨ä¸­åœˆå®šä¸åŒçš„\"è§‚å¯Ÿçª—å£\"æ¥åšå¤æ‚ç»Ÿè®¡\n\n[è§†é¢‘é“¾æ¥](https://www.bilibili.com/video/av205732110/)","x":400,"y":-100,"width":800,"height":150,"color":"1"},
		{"id":"overview","type":"text","text":"## è¯¾ç¨‹æ•´ä½“æ¶æ„\n\n### MySQL 8.0+ é«˜çº§åº”ç”¨ä¸‰å¤§æ¿å—\n\n**1. çª—å£å‡½æ•°ï¼ˆåˆ†æå‡½æ•°ï¼‰** â­\n- è§£å†³å¤æ‚æŠ¥è¡¨ç»Ÿè®¡åˆ†æåœºæ™¯\n- MySQL 8.0ç‰ˆæœ¬æ‰å¼€å§‹æ”¯æŒ\n- ä»¥å‰å•†ä¸šæ•°æ®åº“æ—©å°±æ”¯æŒäº†\n\n**2. ç´¢å¼•**\n- æå‡æŸ¥è¯¢æ€§èƒ½\n- ä¼˜åŒ–æ•°æ®æ£€ç´¢é€Ÿåº¦\n\n**3. è§†å›¾**\n- ç®€åŒ–å¤æ‚æŸ¥è¯¢\n- æ•°æ®å®‰å…¨å’ŒæŠ½è±¡\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒå­¦å¼€è½¦è¦å…ˆå­¦ç†è®ºã€å†å­¦æ“ä½œã€æœ€åå­¦ç»´æŠ¤ï¼Œè¿™ä¸‰å—æ˜¯MySQLè¿›é˜¶çš„å¿…å¤‡æŠ€èƒ½","x":50,"y":100,"width":350,"height":280,"color":"4"},
		{"id":"window_concept","type":"text","text":"## ä»€ä¹ˆæ˜¯çª—å£å‡½æ•°ï¼Ÿ\n\n### æ ¸å¿ƒæ¦‚å¿µåˆ†è§£\n\n**çª—å£å‡½æ•° = çª—å£ + å‡½æ•°**\n\n#### ğŸªŸ çª—å£ï¼ˆWindowï¼‰\n- ç±»ä¼¼äº\"çª—æˆ·\"ï¼Œé™å®šäº†ä¸€ä¸ªç©ºé—´èŒƒå›´\n- åœ¨æ•°æ®åº“ä¸­æŒ‡**è®°å½•çš„é›†åˆ**\n- åŠ¨æ€å˜åŒ–çš„æ•°æ®è§‚å¯ŸèŒƒå›´\n\n#### ğŸ”§ å‡½æ•°ï¼ˆFunctionï¼‰  \n- åº”ç”¨åœ¨çª—å£å†…çš„ç‰¹æ®Šå‡½æ•°\n- å¦‚ï¼šSUMã€COUNTã€AVGç­‰\n\n### ğŸ“Š ä¸æ™®é€šèšåˆå‡½æ•°çš„åŒºåˆ«\n\n| ç±»å‹ | è¾“å…¥ | è¾“å‡º | ç‰¹ç‚¹ |\n|------|------|------|------|\n| æ™®é€šèšåˆ | å¤šè¡Œ | 1è¡Œ | åˆ†ç»„ååªè¿”å›ä¸€ä¸ªç»“æœ |\n| çª—å£å‡½æ•° | å¤šè¡Œ | å¤šè¡Œ | **æ¯ä¸€è¡Œéƒ½æœ‰ç»“æœ** |\n\n> **é€šä¿—ç†è§£**ï¼šæ™®é€šèšåˆå‡½æ•°åƒæ˜¯æŠŠä¸€å †è‹¹æœæ¦¨æˆä¸€æ¯æœæ±ï¼Œçª—å£å‡½æ•°åƒæ˜¯ç»™æ¯ä¸ªè‹¹æœéƒ½è´´ä¸Šè¥å…»æ ‡ç­¾","x":450,"y":100,"width":400,"height":350,"color":"2"},
		{"id":"real_example","type":"text","text":"## ğŸ“ˆ å®é™…ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹\n\n### é”€å”®æ•°æ®ç´¯è®¡ç»Ÿè®¡éœ€æ±‚\n\n```sql\n-- åŸå§‹æ•°æ®è¡¨ç»“æ„\nCREATE TABLE sales (\n    month_date DATE,     -- æ—¥æœŸå­—æ®µ\n    sales_amount INT     -- é”€å”®é¢å­—æ®µ\n);\n```\n\n| æ—¥æœŸ | å½“æœˆé”€å”®é¢ | ğŸ“éœ€æ±‚ï¼šç´¯è®¡é”€å”®é¢ |\n|------|------------|--------------------|\n| 2019-01 | $1000 | $1000 |\n| 2019-02 | $2000 | $3000 |\n| 2019-03 | $3000 | $6000 |\n| 2019-04 | $4000 | $10000 |\n| 2019-05 | $5000 | $15000 |\n| 2019-06 | $6000 | $21000 |\n\n### ğŸ¯ ä¸šåŠ¡éœ€æ±‚åˆ†æ\n- **ç›®æ ‡**ï¼šæ¯è¡Œéƒ½æ˜¾ç¤º\"æœ¬å¹´åº¦ç´¯è®¡é”€å”®é¢\"\n- **éš¾ç‚¹**ï¼šä¼ ç»ŸSQLå¾ˆéš¾å®ç°\n- **è§£å†³æ–¹æ¡ˆ**ï¼šçª—å£å‡½æ•°è½»æ¾æå®šï¼\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒè·‘é©¬æ‹‰æ¾ï¼Œä¸ä»…è¦çŸ¥é“è¿™ä¸€åœˆè·‘äº†å¤šå°‘ï¼Œè¿˜è¦çŸ¥é“æ€»å…±è·‘äº†å¤šå°‘å…¬é‡Œ","x":900,"y":100,"width":450,"height":400,"color":"3"},
		{"id":"basic_syntax","type":"text","text":"## ğŸ“ çª—å£å‡½æ•°åŸºæœ¬è¯­æ³•\n\n### å®Œæ•´è¯­æ³•ç»“æ„\n\n```sql\nå‡½æ•°å(å‚æ•°) OVER (\n    PARTITION BY åˆ†ç»„å­—æ®µ\n    ORDER BY æ’åºå­—æ®µ  \n    ROWS BETWEEN å¼€å§‹è¡Œ AND ç»“æŸè¡Œ\n)\n```\n\n### ğŸ§© è¯­æ³•ç»„ä»¶è§£æ\n\n#### 1ï¸âƒ£ **å‡½æ•°éƒ¨åˆ†**\n- `SUM()` - æ±‚å’Œ\n- `COUNT()` - è®¡æ•°  \n- `AVG()` - å¹³å‡å€¼\n- `MAX()`, `MIN()` - æœ€å€¼\n\n#### 2ï¸âƒ£ **OVERå­å¥** - å®šä¹‰çª—å£\n- æ ¸å¿ƒå…³é”®å­—ï¼ŒæŒ‡å®šå‡½æ•°æ‰§è¡Œçš„çª—å£èŒƒå›´\n\n#### 3ï¸âƒ£ **ä¸‰å¤§åˆ†æå­å¥**\n- `PARTITION BY` - ğŸ”„ åˆ†ç»„å­å¥\n- `ORDER BY` - ğŸ“Š æ’åºå­å¥  \n- `ROWS BETWEEN` - ğŸ“ çª—å£å­å¥\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒåšèœçš„é…æ–¹ï¼Œå‡½æ•°æ˜¯ä¸»æ–™ï¼ŒOVERæ˜¯é”…å­ï¼Œä¸‰ä¸ªå­å¥æ˜¯è°ƒæ–™","x":540,"y":500,"width":460,"height":380,"color":"6"},
		{"id":"next_steps","type":"text","text":"## ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ è§„åˆ’\n\n### ğŸ“ˆ è¿›é˜¶å­¦ä¹ è·¯å¾„\n\n#### 1ï¸âƒ£ **æ·±å…¥çª—å£å‡½æ•°**\n- æ›´å¤šé«˜çº§å‡½æ•°ï¼ˆPERCENTILEã€NTILEï¼‰\n- å¤æ‚ä¸šåŠ¡åœºæ™¯åº”ç”¨\n- æ€§èƒ½è°ƒä¼˜å®æˆ˜\n\n#### 2ï¸âƒ£ **MySQLç´¢å¼•æŠ€æœ¯**\n- ç´¢å¼•åŸç†ä¸ç±»å‹\n- æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥\n- æ‰§è¡Œè®¡åˆ’åˆ†æ\n\n#### 3ï¸âƒ£ **MySQLè§†å›¾åº”ç”¨**\n- è§†å›¾åˆ›å»ºä¸ç®¡ç†\n- å¤æ‚æŸ¥è¯¢ç®€åŒ–\n- æ•°æ®å®‰å…¨æ§åˆ¶\n\n#### 4ï¸âƒ£ **ç»¼åˆé¡¹ç›®å®æˆ˜**\n- ç”µå•†æ•°æ®åˆ†æç³»ç»Ÿ\n- ç”¨æˆ·è¡Œä¸ºåˆ†æå¹³å°\n- è´¢åŠ¡æŠ¥è¡¨è‡ªåŠ¨åŒ–\n\n### ğŸ¯ å­¦ä¹ å»ºè®®\n- **å¤šç»ƒä¹ **ï¼šç†è®º+å®æˆ˜ç›¸ç»“åˆ\n- **å¤šæ€è€ƒ**ï¼šä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ\n- **å¤šæ€»ç»“**ï¼šå»ºç«‹è‡ªå·±çš„çŸ¥è¯†ä½“ç³»\n\n> **é€šä¿—ç†è§£**ï¼šå­¦ä¼šäº†çª—å£å‡½æ•°ï¼Œå°±åƒæŒæ¡äº†æ•°æ®åˆ†æçš„\"æ˜¾å¾®é•œ\"ï¼Œèƒ½çœ‹åˆ°æ›´ç»†èŠ‚çš„æ•°æ®è§„å¾‹","x":980,"y":2700,"width":400,"height":280,"color":"6"},
		{"id":"summary_key_points","type":"text","text":"## ğŸ“š æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“\n\n### ğŸ¯ çª—å£å‡½æ•°äº”å¤§è¦ç‚¹\n\n1ï¸âƒ£ **æ¦‚å¿µç†è§£**\n- çª—å£ = åŠ¨æ€çš„æ•°æ®è§‚å¯ŸèŒƒå›´\n- æ¯è¡Œéƒ½æœ‰ç»“æœï¼ˆåŒºåˆ«äºGROUP BYï¼‰\n\n2ï¸âƒ£ **è¯­æ³•ç»“æ„**\n```sql\nå‡½æ•°å() OVER (\n    PARTITION BY -- åˆ†ç»„\n    ORDER BY     -- æ’åº  \n    ROWS BETWEEN -- çª—å£èŒƒå›´\n)\n```\n\n3ï¸âƒ£ **ä¸‰å¤§å­å¥ä½œç”¨**\n- `PARTITION BY`ï¼šæ•°æ®åˆ†ç»„ï¼ˆå¯é€‰ï¼‰\n- `ORDER BY`ï¼šè®¡ç®—é¡ºåºï¼ˆç´¯è®¡å¿…é¡»ï¼‰\n- `ROWS BETWEEN`ï¼šç²¾ç¡®æ§åˆ¶çª—å£å¤§å°\n\n4ï¸âƒ£ **å¸¸ç”¨å‡½æ•°ç±»å‹**\n- èšåˆç±»ï¼šSUMã€COUNTã€AVG\n- æ’åç±»ï¼šRANKã€ROW_NUMBER\n- åç§»ç±»ï¼šLAGã€LEAD\n\n5ï¸âƒ£ **å®é™…åº”ç”¨**\n- ç´¯è®¡ç»Ÿè®¡ã€æ’ååˆ†æã€åŒæ¯”ç¯æ¯”\n- ç§»åŠ¨å¹³å‡ã€è¶‹åŠ¿åˆ†æ\n\n> **è®°å¿†å£è¯€**ï¼šçª—å£å‡½æ•°åƒæ”¾å¤§é•œï¼Œåœˆå®šèŒƒå›´åšç»Ÿè®¡ï¼Œæ¯è¡Œéƒ½æœ‰ä¸€ç»“æœï¼Œåˆ†ææŠ¥è¡¨ç‰¹åˆ«æ£’ï¼","x":140,"y":2600,"width":500,"height":320,"color":"5"},
		{"id":"common_mistakes","type":"text","text":"## âš ï¸ å¸¸è§é”™è¯¯ä¸é¿å‘æŒ‡å—\n\n### ğŸš« å…¸å‹é”™è¯¯æ¡ˆä¾‹\n\n#### 1ï¸âƒ£ **å¿˜è®°ORDER BY**\n```sql\n-- âŒ é”™è¯¯ï¼šç´¯è®¡å‡½æ•°æ²¡æœ‰æ’åº\nSUM(amount) OVER ()\n\n-- âœ… æ­£ç¡®ï¼šæŒ‡å®šæ’åº\nSUM(amount) OVER (ORDER BY date)\n```\n\n#### 2ï¸âƒ£ **çª—å£èŒƒå›´ç†è§£é”™è¯¯**\n```sql\n-- âŒ æ··æ·†ï¼šä»¥ä¸ºæ˜¯å–3è¡Œæ•°æ®\nROWS BETWEEN 3 PRECEDING AND CURRENT ROW\n-- å®é™…ï¼šå½“å‰è¡Œ+å‰é¢3è¡Œ = å…±4è¡Œ\n\n-- âœ… æ­£ç¡®ç†è§£ï¼šæ˜ç¡®è¡Œæ•°\nROWS BETWEEN 2 PRECEDING AND CURRENT ROW -- å…±3è¡Œ\n```\n\n#### 3ï¸âƒ£ **NULLå€¼å¤„ç†ä¸å½“**\n```sql\n-- âŒ æ²¡è€ƒè™‘NULLå€¼å½±å“\nLAG(amount) OVER (ORDER BY date)\n\n-- âœ… å¤„ç†NULLå€¼\nCOALESCE(LAG(amount) OVER (ORDER BY date), 0)\n```\n\n#### 4ï¸âƒ£ **ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜**\n- MySQL 8.0ä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒ\n- ç”Ÿäº§ç¯å¢ƒéœ€ç¡®è®¤ç‰ˆæœ¬\n\n> **é€šä¿—ç†è§£**ï¼šå­¦ä¼šäº†è¯­æ³•ï¼Œè¿˜è¦çŸ¥é“å¸¸è§çš„é™·é˜±åœ¨å“ªé‡Œ","x":580,"y":2170,"width":400,"height":320,"color":"3"},
		{"id":"performance_tips","type":"text","text":"## âš¡ æ€§èƒ½ä¼˜åŒ–æŠ€å·§\n\n### ğŸ¯ æå‡çª—å£å‡½æ•°æ€§èƒ½\n\n#### 1ï¸âƒ£ **ç´¢å¼•ä¼˜åŒ–**\n```sql\n-- ä¸ºORDER BYå­—æ®µåˆ›å»ºç´¢å¼•\nCREATE INDEX idx_sales_date \nON monthly_sales(sale_date);\n\n-- ä¸ºPARTITION BYå­—æ®µåˆ›å»ºç´¢å¼•\nCREATE INDEX idx_sales_year_date \nON monthly_sales(year, sale_date);\n```\n\n#### 2ï¸âƒ£ **åˆç†è®¾ç½®çª—å£å¤§å°**\n- é¿å…ä½¿ç”¨`UNBOUNDED`ï¼ˆé™¤éå¿…è¦ï¼‰\n- é™åˆ¶çª—å£è¡Œæ•°èŒƒå›´\n- ä½¿ç”¨å…·ä½“çš„è¡Œæ•°èŒƒå›´\n\n#### 3ï¸âƒ£ **åˆ†åŒºç­–ç•¥**\n- åˆç†ä½¿ç”¨`PARTITION BY`å‡å°‘è®¡ç®—èŒƒå›´\n- é¿å…è¿‡å¤§çš„åˆ†åŒº\n\n#### 4ï¸âƒ£ **æŸ¥è¯¢ä¼˜åŒ–**\n```sql\n-- å¥½çš„åšæ³•ï¼šé™åˆ¶æ•°æ®èŒƒå›´\nSELECT ... FROM sales \nWHERE sale_date >= '2019-01-01'\nWINDOW w AS (ORDER BY sale_date);\n```\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒå¼€è½¦è¦é€‰æœ€ä¼˜è·¯çº¿ï¼Œæ•°æ®åº“æŸ¥è¯¢ä¹Ÿè¦æ‰¾æœ€å¿«è·¯å¾„","x":-10,"y":2190,"width":400,"height":300,"color":"2"},
		{"id":"practical_exercises","type":"text","text":"## ğŸ“ å®æˆ˜ç»ƒä¹ é¢˜\n\n### ğŸ“Š ç»ƒä¹ æ•°æ®å‡†å¤‡\n```sql\nCREATE TABLE student_scores (\n    student_id INT,\n    subject VARCHAR(50),\n    score INT,\n    exam_date DATE\n);\n```\n\n### ğŸ¯ ç»ƒä¹ é¢˜ç›®\n\n#### é¢˜ç›®1ï¼šæˆç»©æ’å\n**éœ€æ±‚**ï¼šè®¡ç®—æ¯ä¸ªå­¦ç§‘çš„æˆç»©æ’å\n```sql\n-- ä½ çš„ç­”æ¡ˆï¼š\nSELECT student_id, subject, score,\n       RANK() OVER (PARTITION BY subject \n                    ORDER BY score DESC) as rank_in_subject\nFROM student_scores;\n```\n\n#### é¢˜ç›®2ï¼šæˆç»©è¶‹åŠ¿åˆ†æ\n**éœ€æ±‚**ï¼šè®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„æˆç»©å˜åŒ–ï¼ˆä¸ä¸Šæ¬¡è€ƒè¯•å¯¹æ¯”ï¼‰\n\n#### é¢˜ç›®3ï¼šç§»åŠ¨å¹³å‡åˆ†\n**éœ€æ±‚**ï¼šè®¡ç®—æœ€è¿‘3æ¬¡è€ƒè¯•çš„å¹³å‡åˆ†\n\n#### é¢˜ç›®4ï¼šç´¯è®¡é€šè¿‡ç‡\n**éœ€æ±‚**ï¼šè®¡ç®—æˆªæ­¢åˆ°æ¯æ¬¡è€ƒè¯•çš„ç´¯è®¡é€šè¿‡ç‡ï¼ˆâ‰¥60åˆ†ï¼‰\n\n### ğŸ’¡ ç»ƒä¹ æç¤º\n- å…ˆç†è§£éœ€æ±‚ï¼Œå†é€‰æ‹©åˆé€‚çš„çª—å£å‡½æ•°\n- æ³¨æ„åˆ†ç»„å’Œæ’åºçš„é€»è¾‘\n- æµ‹è¯•è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ç¬¬ä¸€æ¬¡è€ƒè¯•ï¼‰\n\n> **é€šä¿—ç†è§£**ï¼šçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ","x":1080,"y":2140,"width":400,"height":350,"color":"4"},
		{"id":"rows_between_detail","type":"text","text":"## ğŸ“ ROWS BETWEEN çª—å£èŒƒå›´è¯¦è§£\n\n### ğŸ¯ ç²¾ç¡®æ§åˆ¶çª—å£å¤§å°\n\n#### åŸºæœ¬è¯­æ³•æ¨¡å¼\n```sql\nROWS BETWEEN èµ·å§‹ä½ç½® AND ç»“æŸä½ç½®\n```\n\n### ğŸ“ ä½ç½®å…³é”®è¯\n\n| å…³é”®è¯ | å«ä¹‰ | ä¸­æ–‡ç†è§£ |\n|--------|------|----------|\n| `PRECEDING` | ä¹‹å‰ | å¾€ä¸Šæ‰¾ |\n| `FOLLOWING` | ä¹‹å | å¾€ä¸‹æ‰¾ |\n| `CURRENT ROW` | å½“å‰è¡Œ | å°±æ˜¯ç°åœ¨è¿™ä¸€è¡Œ |\n| `UNBOUNDED` | æ— è¾¹ç•Œ | ä¸é™åˆ¶ |\n\n### ğŸ”¥ å¸¸ç”¨çª—å£èŒƒå›´ç»„åˆ\n\n```sql\n-- 1. å½“å‰è¡Œå’Œå‰é¢2è¡Œ\nROWS BETWEEN 2 PRECEDING AND CURRENT ROW\n\n-- 2. å½“å‰è¡Œå’Œä¹‹å‰æ‰€æœ‰è¡Œï¼ˆç´¯è®¡ï¼‰\nROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW\n\n-- 3. å½“å‰è¡Œå’Œåé¢2è¡Œ\nROWS BETWEEN CURRENT ROW AND 2 FOLLOWING\n\n-- 4. å‰é¢3è¡Œåˆ°åé¢1è¡Œï¼ˆå…±5è¡Œçª—å£ï¼‰\nROWS BETWEEN 3 PRECEDING AND 1 FOLLOWING\n\n-- 5. æ•´ä¸ªåˆ†ç»„çš„æ‰€æœ‰è¡Œ\nROWS BETWEEN UNBOUNDED PRECEDING AND UNBOUNDED FOLLOWING\n```\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒè®¾å®šç›‘æ§æ‘„åƒå¤´çš„æ‹æ‘„èŒƒå›´ï¼Œå¯ä»¥æ‹å‰é¢ã€åé¢ã€è¿˜æ˜¯å…¨æ™¯","x":500,"y":1000,"width":500,"height":400,"color":"4"},
		{"id":"order_by_detail","type":"text","text":"## ğŸ“Š ORDER BY æ’åºè¯¦è§£\n\n### ğŸ¯ æ ¸å¿ƒä½œç”¨\n- å†³å®šçª—å£å‡½æ•°çš„**è®¡ç®—é¡ºåº**\n- å½±å“ç´¯è®¡è®¡ç®—çš„**æ•°æ®æµå‘**\n\n### ğŸ“ˆ æ’åºå¯¹ç´¯è®¡ç»“æœçš„å½±å“\n\n```sql\n-- æŒ‰æ—¥æœŸå‡åºï¼ˆæ­£å¸¸æ—¶é—´é¡ºåºï¼‰\nORDER BY month_date ASC\nç»“æœï¼š1000 â†’ 3000 â†’ 6000 â†’ 10000\n\n-- æŒ‰æ—¥æœŸé™åºï¼ˆå€’åºæ—¶é—´ï¼‰  \nORDER BY month_date DESC\nç»“æœï¼š21000 â†’ 20000 â†’ 17000 â†’ 11000\n```\n\n### âš ï¸ æ³¨æ„äº‹é¡¹\n- ç´¯è®¡å‡½æ•°**å¿…é¡»æœ‰ORDER BY**\n- æ’åºå­—æ®µé€šå¸¸æ˜¯æ—¶é—´æˆ–åºå·\n- ä¸åŒæ’åºäº§ç”Ÿä¸åŒçš„ç´¯è®¡è·¯å¾„\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒæ­ç§¯æœ¨ï¼Œé¡ºåºä¸åŒï¼Œæ­å‡ºæ¥çš„å½¢çŠ¶å°±ä¸ä¸€æ ·","x":-300,"y":940,"width":500,"height":400,"color":"3"},
		{"id":"advanced_functions","type":"text","text":"## ğŸš€ é«˜çº§çª—å£å‡½æ•°ç±»å‹\n\n### 1ï¸âƒ£ **èšåˆå‡½æ•°ç±»**\n- `SUM()` - æ±‚å’Œ\n- `COUNT()` - è®¡æ•°\n- `AVG()` - å¹³å‡å€¼\n- `MAX()`, `MIN()` - æœ€å€¼\n\n### 2ï¸âƒ£ **æ’åå‡½æ•°ç±»**\n```sql\n-- æ’åç›¸å…³\nROW_NUMBER() OVER (ORDER BY score DESC)  -- è¿ç»­æ’å\nRANK() OVER (ORDER BY score DESC)        -- è·³è·ƒæ’å  \nDENSE_RANK() OVER (ORDER BY score DESC)  -- å¯†é›†æ’å\n```\n\n### 3ï¸âƒ£ **åç§»å‡½æ•°ç±»**\n```sql\n-- å–å‰åè¡Œæ•°æ®\nLAG(amount, 1) OVER (ORDER BY date)      -- ä¸Šä¸€è¡Œ\nLEAD(amount, 1) OVER (ORDER BY date)     -- ä¸‹ä¸€è¡Œ\nFIRST_VALUE(amount) OVER (...)           -- çª—å£ç¬¬ä¸€ä¸ªå€¼\nLAST_VALUE(amount) OVER (...)            -- çª—å£æœ€åä¸€ä¸ªå€¼\n```\n\n### 4ï¸âƒ£ **åˆ†å¸ƒå‡½æ•°ç±»**\n```sql\nPERCENT_RANK() OVER (...)                -- ç™¾åˆ†æ¯”æ’å\nCUME_DIST() OVER (...)                   -- ç´¯ç§¯åˆ†å¸ƒ\nNTILE(4) OVER (ORDER BY score)          -- å››åˆ†ä½æ•°\n```\n\n### ğŸ¯ å®é™…åº”ç”¨åœºæ™¯\n- **é”€å”®æ’ååˆ†æ**ï¼šå“ªä¸ªé”€å”®å‘˜ä¸šç»©æœ€å¥½ï¼Ÿ\n- **åŒæ¯”ç¯æ¯”åˆ†æ**ï¼šè¿™ä¸ªæœˆæ¯”ä¸Šä¸ªæœˆå¢é•¿å¤šå°‘ï¼Ÿ\n- **åˆ†ç»„ç»Ÿè®¡**ï¼šæŒ‰åœ°åŒºã€æŒ‰äº§å“çº¿åˆ†åˆ«ç»Ÿè®¡\n- **å¼‚å¸¸æ£€æµ‹**ï¼šå“ªäº›æ•°æ®åç¦»æ­£å¸¸èŒƒå›´ï¼Ÿ\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒç‘å£«å†›åˆ€ï¼Œä¸€ä¸ªå·¥å…·åŒ…å«å¤šç§åŠŸèƒ½ï¼Œé€‚ç”¨ä¸åŒåœºæ™¯","x":850,"y":1575,"width":450,"height":400,"color":"6"},
		{"id":"complete_example","type":"text","text":"## ğŸ¯ å®Œæ•´å®æˆ˜ç¤ºä¾‹\n\n### ğŸ’° é”€å”®æ•°æ®ç´¯è®¡åˆ†æ\n\n```sql\n-- åˆ›å»ºæµ‹è¯•æ•°æ®\nCREATE TABLE monthly_sales (\n    sale_date DATE,\n    amount DECIMAL(10,2)\n);\n\nINSERT INTO monthly_sales VALUES\n('2019-01-01', 1000.00),\n('2019-02-01', 2000.00),\n('2019-03-01', 3000.00),\n('2019-04-01', 4000.00),\n('2019-05-01', 5000.00),\n('2019-06-01', 6000.00);\n\n-- çª—å£å‡½æ•°æŸ¥è¯¢ï¼šç´¯è®¡é”€å”®é¢\nSELECT \n    sale_date,\n    amount AS monthly_amount,\n    SUM(amount) OVER (\n        ORDER BY sale_date\n        ROWS BETWEEN UNBOUNDED PRECEDING \n        AND CURRENT ROW\n    ) AS cumulative_amount,\n    -- è®¡ç®—å¢é•¿ç‡\n    ROUND(\n        (amount * 100.0 / \n         LAG(amount) OVER (ORDER BY sale_date) - 100), 2\n    ) AS growth_rate_percent\nFROM monthly_sales\nORDER BY sale_date;\n```\n\n### ğŸ“Š æŸ¥è¯¢ç»“æœ\n| æ—¥æœŸ | å½“æœˆé”€å”®é¢ | ç´¯è®¡é”€å”®é¢ | å¢é•¿ç‡% |\n|------|------------|------------|----------|\n| 2019-01 | Â¥1,000 | Â¥1,000 | NULL |\n| 2019-02 | Â¥2,000 | Â¥3,000 | 100.00% |\n| 2019-03 | Â¥3,000 | Â¥6,000 | 50.00% |\n| 2019-04 | Â¥4,000 | Â¥10,000 | 33.33% |\n| 2019-05 | Â¥5,000 | Â¥15,000 | 25.00% |\n| 2019-06 | Â¥6,000 | Â¥21,000 | 20.00% |\n\n> **é€šä¿—ç†è§£**ï¼šè¿™å°±åƒé“¶è¡Œè´¦æˆ·çš„æµæ°´è®°å½•ï¼Œæ—¢èƒ½çœ‹åˆ°æ¯ç¬”äº¤æ˜“ï¼Œåˆèƒ½çœ‹åˆ°è´¦æˆ·ä½™é¢å˜åŒ–","x":-100,"y":1525,"width":600,"height":450,"color":"1"},
		{"id":"window_mechanism","type":"text","text":"## ğŸ” çª—å£å·¥ä½œæœºåˆ¶è¯¦è§£\n\n### åŠ¨æ€çª—å£å˜åŒ–è¿‡ç¨‹\n\n#### ç¬¬1æ¡è®°å½•æ‰§è¡Œæ—¶ï¼š\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 2019-01 | $1000 â”‚ â† å½“å‰çª—å£\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nç´¯è®¡é”€å”®é¢ = $1000\n```\n\n#### ç¬¬2æ¡è®°å½•æ‰§è¡Œæ—¶ï¼š\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 2019-01 | $1000 â”‚\nâ”‚ 2019-02 | $2000 â”‚ â† çª—å£æ‰©å¤§\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nç´¯è®¡é”€å”®é¢ = $1000 + $2000 = $3000\n```\n\n#### ç¬¬3æ¡è®°å½•æ‰§è¡Œæ—¶ï¼š\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ 2019-01 | $1000 â”‚\nâ”‚ 2019-02 | $2000 â”‚\nâ”‚ 2019-03 | $3000 â”‚ â† çª—å£ç»§ç»­æ‰©å¤§\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\nç´¯è®¡é”€å”®é¢ = $1000 + $2000 + $3000 = $6000\n```\n\n### ğŸ¯ å…³é”®ç‰¹ç‚¹\n- æ¯æ¡è®°å½•éƒ½ä¼šåœ¨**æ­¤çª—å£å†…æ‰§è¡Œå‡½æ•°**\n- çª—å£å¤§å°**åŠ¨æ€å˜åŒ–**\n- æ¯ä¸€è¡Œéƒ½æœ‰**ç‹¬ç«‹çš„è®¡ç®—ç»“æœ**\n\n> **é€šä¿—ç†è§£**ï¼šåƒç”¨ä¸åŒå¤§å°çš„æ”¾å¤§é•œè§‚å¯Ÿæ•°æ®ï¼Œé•œç‰‡è¶Šæ¥è¶Šå¤§ï¼Œçœ‹åˆ°çš„æ•°æ®è¶Šæ¥è¶Šå¤š","x":-350,"y":500,"width":500,"height":380,"color":"5"},
		{"id":"default_behavior","type":"text","text":"## âš™ï¸ çª—å£å‡½æ•°é»˜è®¤è¡Œä¸º\n\n### ğŸ¯ ä¸‰ç§çœç•¥æƒ…å†µ\n\n#### 1ï¸âƒ£ åªæœ‰ORDER BYï¼Œçœç•¥ROWS\n```sql\nOVER (ORDER BY date)\n-- é»˜è®¤ç­‰åŒäºï¼š\nOVER (ORDER BY date \n      ROWS BETWEEN UNBOUNDED PRECEDING \n      AND CURRENT ROW)\n```\n**æ•ˆæœ**ï¼šç´¯è®¡è®¡ç®—ï¼ˆæœ€å¸¸ç”¨ï¼‰\n\n#### 2ï¸âƒ£ åªæœ‰PARTITION BYï¼Œçœç•¥ORDER BYå’ŒROWS\n```sql\nOVER (PARTITION BY year)\n-- é»˜è®¤ç­‰åŒäºï¼š\nOVER (PARTITION BY year\n      ROWS BETWEEN UNBOUNDED PRECEDING \n      AND UNBOUNDED FOLLOWING)\n```\n**æ•ˆæœ**ï¼šåˆ†ç»„å†…å…¨éƒ¨æ•°æ®è®¡ç®—\n\n#### 3ï¸âƒ£ ç©ºçš„OVERå­å¥\n```sql\nOVER ()\n```\n**æ•ˆæœ**ï¼šæ•´è¡¨æ•°æ®è®¡ç®—\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒæ‰‹æœºçš„è‡ªåŠ¨è®¾ç½®ï¼Œä¸è®¾ç½®å°±ç”¨æœ€åˆç†çš„é»˜è®¤å€¼","x":1750,"y":940,"width":400,"height":400,"color":"5"},
		{"id":"partition_by_detail","type":"text","text":"## ğŸ”„ PARTITION BY åˆ†ç»„è¯¦è§£\n\n### ä¸GROUP BYçš„åŒºåˆ«\n\n| ç‰¹å¾ | GROUP BY | PARTITION BY |\n|------|----------|-------------|\n| è¿”å›è¡Œæ•° | å‡å°‘ï¼ˆæ¯ç»„1è¡Œï¼‰ | ä¿æŒåŸæœ‰è¡Œæ•° |\n| ä½¿ç”¨åœºæ™¯ | æ™®é€šèšåˆ | çª—å£å‡½æ•° |\n| ç»“æœç‰¹ç‚¹ | åˆ†ç»„æ±‡æ€» | æ¯è¡Œéƒ½æœ‰å€¼ |\n\n### ğŸ¯ å®é™…åº”ç”¨åœºæ™¯\n\n```sql\n-- å¤šå¹´åº¦æ•°æ®ï¼ŒæŒ‰å¹´åº¦åˆ†åˆ«ç»Ÿè®¡ç´¯è®¡é”€å”®é¢\nSELECT \n    month_date,\n    sales_amount,\n    SUM(sales_amount) OVER (\n        PARTITION BY YEAR(month_date)\n        ORDER BY month_date\n    ) AS yearly_cumulative\nFROM sales;\n```\n\n### ğŸ“Š æ•°æ®å¤„ç†é€»è¾‘\n- 2019å¹´æ•°æ®å•ç‹¬æˆç»„ï¼Œå†…éƒ¨ç´¯è®¡è®¡ç®—\n- 2020å¹´æ•°æ®å•ç‹¬æˆç»„ï¼Œå†…éƒ¨ç´¯è®¡è®¡ç®—  \n- **ä¸ä¼šè·¨å¹´åº¦æ··åˆè®¡ç®—**\n\n> **é€šä¿—ç†è§£**ï¼šå°±åƒåˆ†ç­è€ƒè¯•ï¼Œæ¯ä¸ªç­çº§å†…éƒ¨æ’åï¼Œä¸ä¼šå’Œå…¶ä»–ç­æ¯”è¾ƒ","x":1538,"y":450,"width":425,"height":380,"color":"2"},
		{"id":"math_formulas","type":"text","text":"## ğŸ“ æ ¸å¿ƒæ•°å­¦å…¬å¼æ±‡æ€»\n\n### ğŸ§® çª—å£å‡½æ•°æ•°å­¦è¡¨è¾¾\n\n$$\\text{çª—å£å‡½æ•°} = f(W_i)$$\n\nå…¶ä¸­ï¼š$W_i$ è¡¨ç¤ºç¬¬ $i$ è¡Œå¯¹åº”çš„çª—å£æ•°æ®é›†\n\n### ğŸ“Š ç´¯è®¡æ±‚å’Œå…¬å¼\n\n$$\\text{ç´¯è®¡å’Œ}_i = \\sum_{j=1}^{i} x_j$$\n\n### ğŸ“ˆ ç§»åŠ¨å¹³å‡å…¬å¼ï¼ˆçª—å£å¤§å°ä¸º $k$ï¼‰\n\n$$\\text{ç§»åŠ¨å¹³å‡}_i = \\frac{1}{k} \\sum_{j=i-k+1}^{i} x_j$$\n\n### ğŸ¯ æ’åå‡½æ•°å…¬å¼\n\n$$\\text{RANK}(x_i) = 1 + \\sum_{j=1}^{n} \\mathbf{1}_{x_j > x_i}$$\n\nå…¶ä¸­ï¼š$\\mathbf{1}$ æ˜¯æŒ‡ç¤ºå‡½æ•°\n\n### ğŸ“‰ ç™¾åˆ†ä½æ•°å…¬å¼\n\n$$\\text{PERCENT_RANK}(x_i) = \\frac{\\text{RANK}(x_i) - 1}{n - 1}$$\n\nå…¶ä¸­ï¼š$n$ æ˜¯æ€»è¡Œæ•°\n\n### ğŸ”„ LAG/LEAD åç§»å…¬å¼\n\n$$\\text{LAG}(x_i, k) = x_{i-k}$$\n$$\\text{LEAD}(x_i, k) = x_{i+k}$$\n\n> **é€šä¿—ç†è§£**ï¼šæ•°å­¦å…¬å¼çœ‹èµ·æ¥å¤æ‚ï¼Œä½†æœ¬è´¨å°±æ˜¯åœ¨å®šä¹‰\"å¦‚ä½•è®¡ç®—çª—å£å†…çš„æ•°æ®\"","x":2080,"y":1965,"width":350,"height":350,"color":"2"},
		{"id":"cef70f7ca5d2cdd5","type":"file","file":"00-Obsidian/é™„ä»¶/Pasted image 20250609141021.png","x":550,"y":1440,"width":398,"height":59}
	],
	"edges":[
		{"id":"edge1","fromNode":"title","fromSide":"bottom","toNode":"overview","toSide":"right","color":"4","label":"è¯¾ç¨‹å¯¼å…¥"},
		{"id":"edge2","fromNode":"overview","fromSide":"right","toNode":"window_concept","toSide":"left","color":"2","label":"æ ¸å¿ƒæ¦‚å¿µ"},
		{"id":"edge3","fromNode":"window_concept","fromSide":"right","toNode":"real_example","toSide":"left","color":"3","label":"å®é™…åº”ç”¨"},
		{"id":"edge4","fromNode":"real_example","fromSide":"left","toNode":"window_mechanism","toSide":"right","color":"5","label":"å·¥ä½œåŸç†"},
		{"id":"edge5","fromNode":"window_mechanism","fromSide":"right","toNode":"basic_syntax","toSide":"left","color":"6","label":"è¯­æ³•ç»“æ„"},
		{"id":"edge6","fromNode":"basic_syntax","fromSide":"right","toNode":"partition_by_detail","toSide":"left","color":"2","label":"åˆ†ç»„è¯¦è§£"},
		{"id":"edge7","fromNode":"basic_syntax","fromSide":"left","toNode":"order_by_detail","toSide":"right","color":"3","label":"æ’åºè¯¦è§£"},
		{"id":"edge8","fromNode":"basic_syntax","fromSide":"bottom","toNode":"rows_between_detail","toSide":"top","color":"4","label":"çª—å£è¯¦è§£"},
		{"id":"edge9","fromNode":"rows_between_detail","fromSide":"right","toNode":"default_behavior","toSide":"left","color":"5","label":"é»˜è®¤è¡Œä¸º"},
		{"id":"edge10","fromNode":"partition_by_detail","fromSide":"bottom","toNode":"complete_example","toSide":"top","color":"1","label":"å®æˆ˜ç¤ºä¾‹"},
		{"id":"edge11","fromNode":"order_by_detail","fromSide":"bottom","toNode":"complete_example","toSide":"top","color":"1","label":"ç»¼åˆåº”ç”¨"},
		{"id":"edge12","fromNode":"default_behavior","fromSide":"left","toNode":"complete_example","toSide":"right","color":"1","label":"ä»£ç å®ç°"},
		{"id":"edge13","fromNode":"complete_example","fromSide":"right","toNode":"advanced_functions","toSide":"left","color":"6","label":"å‡½æ•°æ‰©å±•"},
		{"id":"edge14","fromNode":"advanced_functions","fromSide":"left","toNode":"performance_tips","toSide":"right","color":"2","label":"æ€§èƒ½ä¼˜åŒ–"},
		{"id":"edge15","fromNode":"advanced_functions","fromSide":"bottom","toNode":"common_mistakes","toSide":"top","color":"3","label":"é¿å‘æŒ‡å—"},
		{"id":"edge16","fromNode":"performance_tips","fromSide":"right","toNode":"practical_exercises","toSide":"left","color":"4","label":"å®æˆ˜ç»ƒä¹ "},
		{"id":"edge17","fromNode":"common_mistakes","fromSide":"right","toNode":"practical_exercises","toSide":"left","color":"4","label":"å¼ºåŒ–è®­ç»ƒ"},
		{"id":"edge18","fromNode":"practical_exercises","fromSide":"left","toNode":"summary_key_points","toSide":"right","color":"5","label":"çŸ¥è¯†æ€»ç»“"},
		{"id":"edge19","fromNode":"summary_key_points","fromSide":"right","toNode":"next_steps","toSide":"left","color":"6","label":"å­¦ä¹ è§„åˆ’"},
		{"id":"edge20","fromNode":"window_concept","fromSide":"bottom","toNode":"basic_syntax","toSide":"top","color":"6","label":"è¯­æ³•åŸºç¡€"},
		{"id":"edge21","fromNode":"real_example","fromSide":"bottom","toNode":"advanced_functions","toSide":"top","color":"6","label":"å‡½æ•°åº”ç”¨"},
		{"id":"edge22","fromNode":"basic_syntax","fromSide":"right","toNode":"math_formulas","toSide":"left","color":"2","label":"æ•°å­¦åŸç†"},
		{"id":"edge23","fromNode":"advanced_functions","fromSide":"right","toNode":"math_formulas","toSide":"bottom","color":"2","label":"å…¬å¼è§£æ"},
		{"id":"a371ebe5eef4f33c","fromNode":"rows_between_detail","fromSide":"bottom","toNode":"cef70f7ca5d2cdd5","toSide":"top"}
	]
}