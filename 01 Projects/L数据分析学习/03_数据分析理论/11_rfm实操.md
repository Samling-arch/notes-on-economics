![image.png](https://raw.githubusercontent.com/SAMLAY-c/obsidian-photos/university/img/20250617201413320.png)
# RFM 分析方法：从 0 到 1 的完全入门指南
> [!INFO]
> 
> 一句话概括：RFM 分析是一种通过观察用户 最近一次消费 (Recency)、消费频率 (Frequency) 和 消费金额 (Monetary) 这三个指标，来判断用户价值并对他们进行分类的方法。

## 1. 准备工作：我们需要什么数据？
> [!INFO]
> 
> 一句话概括：要开始 RFM 分析，我们首先需要一份包含用户身份、消费时间和消费金额的账单记录。


在我们开始计算之前，我们需要准备好最基础的原材料。在数据分析里，这些“原材料”就是数据。对于 RFM 模型，我们最核心需要的数据只有三样：

- **用户ID (User ID)**
    - **是什么**：这是每个用户的唯一身份标识，就像是每个人的身份证号码。它可以是用户名、手机号、会员卡号等等。
    - **为什么需要**：我们需要它来区分“张三”和“李四”，确保我们分析的是特定一个人的消费行为，而不是把所有人的账单混在一起。
- **消费时间 (Consumption Time)**
    - **是什么**：就是用户每一笔订单的付款时间。
    - **为什么需要**：这个时间戳是计算 **R (Recency)** 的关键。我们想知道用户是昨天刚来过，还是已经一年没来了。
- **消费金额 (Consumption Amount)**
    - **是什么**：就是用户每一笔订单花了多少钱。
    - **为什么需要**：这个金额是计算 **M (Monetary)** 的基础。它直接反映了用户的消费能力和对我们业务的贡献度。

### 举个例子：原始数据表

假设我们有这样一张虚拟的订单记录表，并且我们今天的日期是 `5月30日`。


有了这份数据，我们就可以开始第一步的计算了。



## 2. 第一步：计算 RFM 原始值

> [!INFO]
> 
> 一句话概括：这一步是把原始的消费记录，加工成每个用户独立的 R、F、M 三个具体数值。

现在，我们要针对每一个用户，计算出他们各自的 R、F、M 值。这三个值都是“绝对值”，也就是没有经过任何加工的原始计算结果。

### R (Recency) - 最近一次消费时间间隔

- **是什么**：用户最近一次消费距离“今天”有多久。
- **公式来源**：它的计算逻辑非常直观，就是用一个固定的“分析日期”（通常是今天或数据截止的日期）减去用户最后一次的消费日期。
- **公式**：$$ R = 分析日期 - 用户最近一次消费日期 $$
- **为什么重要**：**R 值越小，说明用户最近还很活跃，价值通常越高**。一个昨天刚买东西的用户，比一个一年没来的用户更有可能再次消费。

### F (Frequency) - 消费频率

- **是什么**：在某个时间段内（例如最近一个月、最近一年），用户总共消费了多少次。
- **公式来源**：这是一个简单的计数过程，就是数一数在指定时间段内，某个用户ID总共出现了几次。
- **公式**：$$ F = \text{在指定时间段内的消费次数} $$
- **为什么重要**：**F 值越大，说明用户是我们的常客，忠诚度通常越高**。

### M (Monetary) - 消费金额

- **是什么**：在某个时间段内，用户总共消费了多少钱。
- **公式来源**：这是一个求和过程，就是把某个用户在指定时间段内所有订单的金额加起来。
- **公式**：$$ M = \text{在指定时间段内的消费总金额} $$
- **为什么重要**：**M 值越大，说明用户的消费能力越强，是我们的“金主”**。

### 举个例子：计算“老王”和“小李”的 RFM 原始值

假设今天是 `5月30日`，我们来计算一下两位用户的 RFM 值。

- **用户：老王 (ID: 1)**
    
    - **R (Recency)**: 今天是 `30号`，老王最近一次消费是 `26号`。 $$ R = 30 - 26 = 4 \text{ (天)} $$
    - **F (Frequency)**: 在我们统计的这个月里，老王消费了 `2` 次 (`26号` 和 `10号`)。 $$ F = 2 \text{ (次)} $$
    - **M (Monetary)**: 他两次消费的总金额是 300+200。 $$ M = 500 \text{ (元)} $$
    - **老王的 RFM 原始值**: (R=4, F=2, M=500)
- **用户：小李 (ID: 2)**
    
    - **R (Recency)**: 今天是 `30号`，小李最近一次消费是 `28号`。 $$ R = 30 - 28 = 2 \text{ (天)} $$
    - **F (Frequency)**: 假设小李在这个月总共消费了 `15` 次。 $$ F = 15 \text{ (次)} $$
    - **M (Monetary)**: 假设小李虽然买的次数多，但都是小东西，总金额是 `100` 元。 $$ M = 100 \text{ (元)} $$
    - **小李的 RFM 原始值**: (R=2, F=15, M=100)


| 用户ID | 用户名 | R (天) | F (次) | M (元) |
| :--- | :--- | :--- | :--- | :--- |
| 1 | 老王 | $4$ | $2$ | $500$ |
| 2 | 小李 | $2$ | $15$ | $100$ |




## 3. 第二步：给 RFM 值打分

> [!INFO]
> 
> 一句话概括：这一步是根据业务价值，将原始的 R、F、M 数值转换成更有意义的评分，方便后续比较。

我们得到了像 `4天`、`500元` 这样的原始值，但这些数字本身不方便直接比较。比如 R 的 `4天` 和 F 的 `2次`，哪个更好？为了解决这个问题，我们需要建立一个统一的“评分体系”。

**核心思想**：我们不是根据数字大小打分，而是**根据指标所代表的“价值”来打分**。

- 对于 **R (Recency)**，间隔时间越短，价值越高，所以**R值越小，得分越高**。
- 对于 **F (Frequency)** 和 **M (Monetary)**，次数越多、金额越高，价值就越高，所以 **F/M 值越大，得分越高**。

### 举个例子：建立打分标准表

这个评分标准不是固定的，它需要根据你的具体业务来定。比如，对于一家咖啡店，3天没来就算是很久了；但对于一家汽车4S店，一年来一次都算是常客。

> [!WARNING]
> 
> 谁来定标准？
> 
> 在实际工作中，这个标准最好由最懂业务的领导或业务部门负责人来提供。因为他们最清楚什么样的客户行为才算“好”。如果你自己定，可能会因为不了解业务而被质疑结果的准确性。

假设我们的业务领导给了我们以下这个评分标准（1分最低，5分最高）：

**R 值打分标准 (间隔越短，分越高)**

|   |   |
|---|---|
|**R (最近消费间隔)**|**分数**|
|1−3 天内|5 分|
|3−5 天内|4 分|
|5−10 天内|3 分|
|10−20 天内|2 分|
|>20 天|1 分|

**F 值打分标准 (频率越高，分越高)**

|   |   |
|---|---|
|**F (消费次数)**|**分数**|
|>20 次|5 分|
|10−20 次|4 分|
|6−8 次|3 分|
|2−6 次|2 分|
|<2 次 (即1次)|1 分|

**M 值打分标准 (金额越高，分越高)**

|   |   |
|---|---|
|**M (消费金额)**|**分数**|
|>500 元|5 分|
|300−500 元|4 分|
|150−300 元|3 分|
|100−150 元|2 分|
|<100 元|1 分|

### 实际打分操作

现在我们根据这个标准，给老王和小李打分。

- **用户：老王 (R=4, F=2, M=500)**
    
    - **R 分数**: R值为 `4` 天，落在 `3-5天` 的区间，所以 R 得分为 **4 分**。
    - **F 分数**: F值为 `2` 次，落在 `2-6次` 的区间，所以 F 得分为 **2 分**。(_注意：视频里的口误可能导致理解偏差，按此表2次应得2分，但视频最终给了1分，我们这里按视频最终结论走，假设`2-6次`不包含2，而`<=2`次为1分。在实际工作中，区间的开闭需要明确定义，例如 `[2,6)`_。为了与视频结果一致，我们在此处记为**1分**。)
    - **M 分数**: M值为 `500` 元，落在 `300-500元` 的区间，所以 M 得分为 **4 分**。
    - **老王的 RFM 分数**: (R=4, F=1, M=4)
- **用户：小李 (R=2, F=15, M=100)**
    
    - **R 分数**: R值为 `2` 天，落在 `1-3天` 的区间，所以 R 得分为 **5 分**。
    - **F 分数**: F值为 `15` 次，落在 `10-20次` 的区间，所以 F 得分为 **4 分**。
    - **M 分数**: M值为 `100` 元，落在 `100-150元` 的区间，所以 M 得分为 **2 分**。
    - **小李的 RFM 分数**: (R=5, F=4, M=2)

我们的表格更新为：


| 用户ID | 用户名 | R(原始值) | F(原始值) | M(原始值) | R(分数) | F(分数) | M(分数) |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 1 | 老王 | 4 | 2 | 500 | $4$ | $1$ | $4$ |
| 2 | 小李 | 2 | 15 | 100 | $5$ | $4$ | $2$ |


---

## 4. 第三步：判断“高”与“低”

> [!INFO]
> 
> 一句话概括：这一步是通过和所有用户的平均分进行比较，给每个用户的 R、F、M 分数打上“高”或“低”的标签。

现在每个用户都有了 R、F、M 三个分数，但我们最终的目标是把他们分类，比如“重要客户”、“流失客户”等。要做到这一点，我们需要一个简单明了的判断标准：“高”和“低”。

如何判断高低？最简单直接的方法就是**和平均值比较**。

> [!IMPORTANT]
> 
> 和什么平均值比较？
> 
> 这里是一个非常关键且容易出错的地方！我们是和所有用户的 分数 的平均值进行比较，绝对不是 和原始值（如天数、金额）的平均值比较。因为分数已经帮我们统一了度量衡。

### 计算平均分

我们来计算一下 R、F、M 各自的平均分数。

- **R 的平均分**: $$ \text{Avg}(R_{score}) = \frac{\text{老王的R分} + \text{小李的R分}}{2} = \frac{4 + 5}{2} = 4.5 $$
- **F 的平均分**: $$ \text{Avg}(F_{score}) = \frac{\text{老王的F分} + \text{小李的F分}}{2} = \frac{1 + 4}{2} = 2.5 $$
- **M 的平均分**: $$ \text{Avg}(M_{score}) = \frac{\text{老王的M分} + \text{小李的M分}}{2} = \frac{4 + 2}{2} = 3.0 $$

### 进行高低判断

判断规则很简单：

- 如果用户的分数 **高于** 平均分，则为 **高 (High)**。
    
- 如果用户的分数 **低于或等于** 平均分，则为 **低 (Low)**。
    
- **用户：老王 (R分=4, F分=1, M分=4)**
    
    - **R**: 4<4.5⟹ **低 (Low)**
    - **F**: 1<2.5⟹ **低 (Low)**
    - **M**: 4>3.0⟹ **高 (High)**
    - **老王的 RFM 组合**: **低-低-高**
- **用户：小李 (R分=5, F分=4, M分=2)**
    
    - **R**: 5>4.5⟹ **高 (High)**
    - **F**: 4>2.5⟹ **高 (High)**
    - **M**: 2<3.0⟹ **低 (Low)**
    - **小李的 RFM 组合**: **高-高-低**

---

## 5. 第四步：用户分类与打标签

> [!INFO]
> 
> 一句话概括：最后一步，我们将高低组合与一个标准的用户分类表进行匹配，从而给每个用户打上最终的身份标签。

我们已经得到了每个用户的“高低”组合密码，比如老王的“低低高”。现在，我们只需要一本“密码本”来解读这个密码的含义。这本“密码本”就是 **RFM 用户分类规则表**。

因为 R、F、M 各有“高”、“低”两种状态，所以总共有 2×2×2=8 种组合，对应八类不同的用户。

### 标准的 RFM 用户分类表

下面是一个通用的8种用户分类的定义：

| R   | F   | M   | 用户分类   | 特征描述                     | 营销策略                 |
| :-- | :-- | :-- | :----- | :----------------------- | :------------------- |
| 高   | 高   | 高   | 重要价值用户 | 最近来过，经常来，花钱还多！铁杆粉丝，金主爸爸。 | 提供VIP服务，保持最高优先级关怀。   |
| 低   | 高   | 高   | 重要保持用户 | 很久没来了，但以前是常客且花钱多。可能在沉睡。  | 主动联系，用折扣或新品唤醒他们。     |
| 高   | 低   | 高   | 重要发展用户 | 最近来了，花钱也多，但就是不常来。潜力股。    | 推荐办卡、储值或鼓励多次购买。      |
| 低   | 低   | 高   | 重要挽留用户 | 很久没来了，也不常来，但曾经花过大钱。      | 重点挽回对象，分析流失原因。       |
| 高   | 高   | 低   | 重要潜力用户 | 最近来，也经常来，但花钱少。图个热闹。      | 鼓励他们尝试更高价的商品，提升客单价。  |
| 低   | 高   | 低   | 一般保持用户 | 以前是常客但花钱少，现在不怎么来了。       | 可以推送常规优惠，维持联系。       |
| 高   | 低   | 低   | 新用户    | 刚来没几次，花钱也少。              | 提供新人引导和优惠，培养成回头客。    |
| 低   | 低   | 低   | 流失用户   | 很久没来，几乎不来，花钱也少。缘分已尽。     | 成本允许的情况下可尝试召回，或暂时放弃。 |

### 对号入座，完成分析

现在，我们可以给老王和小李打上最终的标签了。

- **老王**: 他的组合是 **低-低-高** (R-F-M)。
    
    - 查表可知，他属于 **重要挽留用户**。
    - **解读**：这位顾客（老王）曾经有过大额消费，对我们很有价值（M高），但现在他不常来了（F低），而且最近一次消费也是比较久之前了（R低）。他是一位急需我们去关心和挽回的重要客户！
- **小李**: 他的组合是 **高-高-低** (R-F-M)。
    
    - 查表可知，他属于 **重要潜力用户**。
    - **解读**：这位顾客（小李）非常活跃，最近常来（R高，F高），但每次花的钱不多（M低）。他很有希望成为我们的核心客户，我们需要想办法让他花更多的钱，比如推荐更贵但更好的产品给他。

## 总结：RFM 分析流程图

至此，整个 RFM 分析的流程就完成了。我们可以把它总结为以下四个核心步骤：

> [!SUMMARY]
> 
> 1. **计算原始值**：从订单数据中，为每个用户计算出 R（最近消费间隔）、F（消费次数）、M（消费总额）的绝对值。
> 2. **打分**：根据业务方提供的标准，将 R、F、M 的原始值转换成 1−5 分的评分。
> 3. **定高低**：计算所有用户 R、F、M 的平均分，然后将每个用户的得分与平均分比较，从而确定该项是“高”还是“低”。
> 4. **分类**：将用户的高低组合（如“高-高-低”）与标准的8类用户模型匹配，得出用户的最终分类，并根据分类采取相应的运营策略（精细化运营）。
