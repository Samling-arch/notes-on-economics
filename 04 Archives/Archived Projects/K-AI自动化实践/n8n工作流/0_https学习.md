
# n8n 核心节点：HTTP Request 节点深度解析 (小白版)
> [!note] 写给零基础的你
> 嗨！欢迎来到 n8n 的世界！你可能觉得 `HTTP Request` 这个名字听起来很“技术宅”，但请别担心。这篇文章就是为你量身定做的。我会用最简单的比喻，带你一步步揭开它神秘的面纱。学完后，你会发现它其实是你手中最强大的工具之一！
## 一、什么是 HTTP Request 节点？它到底能干啥？
> [!summary] 一句话概括
> 这个节点就像是 n8n 的“信使”或“超级浏览器”，能帮你去访问任何网站或网络服务（我们称之为 API），替你获取信息或发送指令。
### 细节深挖
想象一下，你平时上网是怎么做的？
1.  在浏览器地址栏输入一个网址 (比如 `www.google.com`)。
2.  按下回车。
3.  浏览器就帮你把谷歌的页面“拿”了回来，显示给你看。
这个过程，在技术上就叫做一次 **HTTP 请求 (HTTP Request)**。你（通过浏览器）是请求方，谷歌的服务器是响应方。
`HTTP Request` 节点在 n8n 里扮演的就是这个“浏览器”的角色。但它更强大，因为它不仅能像浏览器一样“看”网页（这叫 `GET` 请求），还能：
*   **提交表单**：比如注册一个新用户（这叫 `POST` 请求）。
*   **修改信息**：比如更新你的个人资料（这叫 `PUT` 请求）。
*   **删除内容**：比如删除一条评论（这叫 `DELETE` 请求）。
任何需要和外部网络服务打交道的事情，几乎都可以用它来完成。例如，获取天气预报、查询股票价格、给你的智能家居发送指令、往你的在线表格里添加一行数据等等。
## 二、节点参数全解析：面板上的每个选项都是什么意思？
当你把 `HTTP Request` 节点拖到画布上时，会看到一个设置面板。我们来逐一攻克上面的每一个选项。
### 1. URL (统一资源定位符)
> [!summary] 一句话概括
> 这里填的就是你要访问的那个“网址”或“网络服务地址”。
*   **来源与细节**:
    *   URL 的全称是 Uniform Resource Locator。你可以把它理解为网络世界里每一个资源的“家庭住址”。
    *   在 n8n 中，你可以直接把地址复制粘贴进去，比如 `https://api.example.com/data`。
    *   **重点**：你通常也可以使用**表达式 (Expression)**，从上一个节点动态获取 URL。点击输入框右边的小图标 `f(x)` 就可以切换到表达式模式。这让你的工作流变得非常灵活。
*   **举个例子**:
    *   **静态 URL**: 直接填写 `https://randomuser.me/api/` (这是一个可以获取随机用户信息的免费服务)。
    *   **动态 URL (表达式)**: 假设上一个节点输出了一个叫做 `user_id` 的字段，值为 `$123$`，你想查询这个用户的信息。你的 URL 就可以写成表达式：`https://api.example.com/users/{{ $json.user_id }}`。这里 `{{ $json.user_id }}` 会被 n8n 自动替换成 `$123$`。
### 2. Method (请求方法)
> [!summary] 一句话概括
> 这里定义了你这次访问网络是想“干什么”，是想拿东西，还是想放东西。
*   **来源与细节**:
    *   HTTP 协议预先定义好了一系列“动作”，也就是“方法”，来告诉服务器你的意图。最常用的有 $4$ 个：
    *   `GET`: **获取数据**。这是最常见的一种，就像在浏览器里看网页。它只是读取信息，不会改变服务器上的任何东西。
    *   `POST`: **创建新数据**。比如你发一条新的朋友圈，就是向服务器 `POST` 了一条新内容。
    *   `PUT`: **更新/替换数据**。比如你修改你的微信头像，就是 `PUT` 一个新的头像图片，把旧的替换掉。
    *   `DELETE`: **删除数据**。比如你删除一条微博，就是向服务器 `DELETE` 这条数据。
*   **举个例子**:
    *   要查询天气，你会选择 `GET` 方法。
    *   要在一个在线记事本应用里添加一条新笔记，你会选择 `POST` 方法。
### 3. Authentication (身份认证)
> [!summary] 一句话概括
> 这里是用来“证明你是谁”的地方，就像是出示你的身份证或门禁卡。
*   **来源与细节**:
    *   很多网络服务不是对所有人开放的，你需要证明你有权限访问。这就是“认证”。
    *   n8n 内置了多种常见的认证方式：
        *   **None**: 无需认证，谁都可以访问。
        *   **Basic Auth**: 基本认证。提供一个用户名和密码。n8n 会帮你把它们组合成一个特殊的字符串发送过去。
        *   **Header Auth**: 头部认证。把你的“通行证”（通常叫 API Key 或 Token）放在请求的一个叫做 "Header" 的地方。这就像是在信封上贴一个“VIP”标签。
        *   **OAuth2**: 更现代、更安全的认证方式。它不会直接发送你的密码，而是通过一个授权流程获取一个临时的“令牌”（Token）来访问。比如你用微信登录某个 App，就是 OAuth2 的过程。
*   **举个例子**:
    *   访问一个公开的天气 API，你可能选择 `None`。
    *   访问你自己的 Notion 数据库，你可能需要用到 `Header Auth`，并填入 Notion 提供给你的 `API Key`。
### 4. Send Body (发送内容)
> [!summary] 一句话概括
> 如果你要创建或修改数据（比如用 `POST` 或 `PUT` 方法），这里就是你放“具体内容”的地方。
*   **来源与细节**:
    *   当你用 `GET` 方法时，这个部分通常是空的，因为你只是去“拿”东西。
    *   当你用 `POST` 或 `PUT` 时，你需要告诉服务器你要创建/修改成什么样。这个“什么样”的数据，就放在 Body 里。
    *   常见的内容格式 (Body Type)：
        *   **JSON (JavaScript Object Notation)**: 目前最流行的数据格式。它用键值对 `{ "key": "value" }` 来组织数据，清晰易读。
        *   **Form Data**: 模拟了传统网页表单的提交方式。
        *   **Raw**: 原始数据，你可以填入任何文本，比如 XML。
*   **举个例子**:
    *   假设你要创建一个新用户，他的名字是 "Mike"，年龄是 `$25$`。如果 API 要求 JSON 格式，你会在 Body 中这样写：
    ```json
    {
      "name": "Mike",
      "age": 25
    }
    ```
### 5. Send Headers (发送信头)
> [!summary] 一句话概括
> 这里用来放一些“额外说明”或“元数据”，就像是信封上写的“加急”、“内容物：照片”等信息。
*   **来源与细节**:
    *   Headers 是附加在请求上的一些键值对信息，用于提供上下文。
    *   最常见的 Header 是 `Content-Type`，它告诉服务器你发送的 Body 是什么格式的。比如 `Content-Type: application/json` 就表示你发送的是 JSON 数据。
    *   另一个常见的是 `Accept`，它告诉服务器你希望接收什么格式的返回数据。
    *   如果使用 `Header Auth`，你的认证信息（API Key）也放在这里。
*   **举个例子**:
    *   如果你在 Body 中发送了 JSON 数据，n8n 通常会自动帮你加上一个 Header：
        *   Name: `Content-Type`
        *   Value: `application/json`
### 6. Options (高级选项)
> [!summary] 一句话概括
> 这里是一些不常用但有时非常有用的“高级设置”，帮你处理特殊情况。
这里我们挑几个对新手最重要的来讲：
*   **Response Format (响应格式)**:
    *   告诉 n8n 如何“解读”服务器返回的数据。
    *   `JSON`: 如果你知道返回的是 JSON 数据，选这个。n8n 会自动帮你把它解析成方便后续节点使用的数据结构。
    *   `File`: 如果返回的是一个文件（比如图片、PDF），选这个。n8n 会把它当做二进制文件来处理。
    *   `String`: 如果返回的是纯文本，选这个。
*   **JSON/XML Passthrough (数据穿透)**:
    *   这是一个对新手来说稍微有点绕的概念。
    *   **不勾选 (默认)**: n8n 会把返回的数据包装一下，放在一个名为 `data` 的对象里。比如，返回的是 `{ "name": "Tom" }`，n8n 输出的是 `{ "data": { "name": "Tom" } }`。
    *   **勾选**: n8n 不做任何包装，直接把服务器返回的数据作为根对象输出。返回 `{ "name": "Tom" }`，n8n 输出的就是 `{ "name": "Tom" }`。
    *   **为什么需要这个？** 有时你希望直接处理原始数据，或者与其他期望特定数据结构的节点对接时，这个选项会很有用。
*   **Split Into Batches (分批处理)**:
    *   如果 API 一次返回了大量数据（比如 `$1000$` 条记录），这个选项可以把它们拆分成多个小批次（比如每批 `$100$` 条）来处理。这样可以防止你的工作流因为内存不足而崩溃。
*   **Ignore Response Codes (忽略响应码)**:
    *   通常情况下，如果服务器返回错误（比如 `404 Not Found` 找不到页面），n8n 会报错并停止工作流。
    *   勾选此项后，即使收到错误码，n8n 也会继续执行下去。这在你想自己处理错误逻辑时非常有用。
## 三、实战演练：从零开始获取一个随机用户信息
> [!example] 动手时间！
> 让我们用一个真实的、无需注册的免费 API 来实践一下。我们的目标是：获取一个随机用户的姓名和头像。
我们将使用这个 API 地址: `https://randomuser.me/api/`
### 步骤 1: 创建工作流
1.  拖入一个 `Manual` (手动触发) 节点。这个节点能让你随时点击“执行”来启动工作流。
2.  在它后面，添加一个 `HTTP Request` 节点，并用线把它们连起来。
### 步骤 2: 配置 HTTP Request 节点
打开 `HTTP Request` 节点的设置面板，我们来逐一填写：
1.  **URL**:
    *   直接填入 `https://randomuser.me/api/`
2.  **Method**:
    *   我们只想“获取”信息，所以保持默认的 `GET` 就好。
3.  **Authentication**:
    *   这个 API 是公开的，不需要认证，所以选择 `None`。
4.  **Send Body / Send Headers**:
    *   因为是 `GET` 请求，我们不需要发送任何内容或特殊的头信息，所以这两个部分都留空。
5.  **Options -> Response Format**:
    *   这个 API 返回的是 JSON 格式的数据，所以我们确保这里选择的是 `JSON`。
**你的配置现在应该看起来像这样：**
*   **URL**: `https://randomuser.me/api/`
*   **Method**: `GET`
*   **Authentication**: `None`
*   **Response Format**: `JSON`
*   (其他都保持默认)
### 步骤 3: 执行并查看结果
点击编辑器右上角的 **Execute Workflow (执行工作流)**。
执行成功后，点击 `HTTP Request` 节点，切换到右侧的 **Output (输出)** 视图。你会看到类似下面的 JSON 数据：
```json
[
  {
    "results": [
      {
        "gender": "female",
        "name": {
          "title": "Miss",
          "first": "Lærke",
          "last": "Møller"
        },
        "location": { ... },
        "email": "lærke.møller@example.com",
        "picture": {
          "large": "https://randomuser.me/api/portraits/women/23.jpg",
          "medium": "https://randomuser.me/api/portraits/med/women/23.jpg",
          "thumbnail": "https://randomuser.me/api/portraits/thumb/women/23.jpg"
        },
        ...
      }
    ],
    "info": { ... }
  }
]
```
恭喜你！你已经成功地从互联网上获取到了数据！
## 四、关于“公式”：n8n 中的表达式 (Expressions)
> [!summary] 一句话概括
> n8n 中的“公式”就是表达式，它能让你像搭积木一样，从之前节点的结果中取出你想要的数据。
虽然这里没有复杂的数学公式，但 n8n 中最重要的“公式”就是**表达式（Expressions）**。它的语法是 `{{ ... }}`。
### “公式”来源与解析
让我们以上面获取到的随机用户信息为例，解析如何提取你想要的数据。
假设我们想在下一个节点中，只使用用户的姓（last name）和中等大小的头像（medium picture）。我们需要编写两个表达式：
1.  **提取姓 (Last Name)**:
    $$
    {{ $json.results[0].name.last }}
    $$
    *   **解析**:
        *   `{{ ... }}`: 表示这是一个 n8n 表达式。
        *   `$json`: 代表 `HTTP Request` 节点输出的整个 JSON 数据。这是起点。
        *   `.results`: 表示我们想进入 `results` 这个部分。你看上面的 JSON 结构，它是一个数组（由方括号 `[]` 表示）。
        *   `[0]`: 表示我们想获取这个数组里的**第 $1$ 个**元素。**（重要：在编程中，计数通常从 $0$ 开始！）**
        *   `.name`: 进入第 $1$ 个元素里的 `name` 对象。
        *   `.last`: 最终，取出 `name` 对象里 `last` 字段的值。在这个例子里，就是 "Møller"。
2.  **提取中等头像链接 (Medium Picture URL)**:
    $$
    {{ $json.results[0].picture.medium }}
    $$
    *   **解析**:
        *   `$json.results[0]`: 和上面一样，定位到第 $1$ 个用户信息。
        *   `.picture`: 进入 `picture` 对象。
        *   `.medium`: 取出 `medium` 字段的值，也就是头像的 URL。
通过这种方式，你可以精确地从任何复杂的返回数据中，拿到你需要的任何一小片信息。这就是 n8n 强大灵活性的核心所在！
> [!success] 总结
> 你已经完成了从零到一的飞跃！现在你知道了：
> 1. `HTTP Request` 节点是 n8n 连接外部世界的桥梁。
> 2. 如何设置 `URL`、`Method` 等核心参数来发出不同类型的请求。
> 3. 如何通过一个真实的例子，成功获取网络数据。
> 4. 如何使用 n8n 的“公式”——表达式，来解析和使用你获取到的数据。
>
> 勇敢地去尝试连接各种你感兴趣的服务吧！每成功连接一个，你的自动化能力就增强一分。祝你玩得开心！
好的，没问题！这张截图展示的是 `HTTP Request` 节点中非常核心的一部分——**`Send Body`**。我们就来把这部分掰开揉碎了，讲得明明白白。
> [!note] 写给零基础的你
> 别被这些英文吓到！我们继续用之前的“信使”和“包裹”的比喻。`Send Body` 这部分，就相当于你在寄快递时，需要填写**包裹里的物品清单**。只有当你需要往服务器“寄送”一些具体东西（比如创建新用户的信息）时，才需要用到它。
## 深入解析 `Send Body`：如何向服务器“递交”数据
请求是否包含查询参数
请求是否包含头部信息
请求是否包含正文
> [!summary] 一句话概括
> 当你需要创建或修改数据时（比如用 `POST` 或 `PUT` 方法），这里就是你用来打包和发送具体内容的“包裹”。
我们从上到下，一步步来看截图里的每一个选项。
### 1. `Send Body` 开关 (Toggle Switch)
> [!summary] 一句话概括
> 打开这个开关，你才能往“包裹”里放东西；关上它，就等于寄一个“空包裹”（通常用于 `GET` 请求）。
*   **来源与细节**:
    *   这个开关控制着你的 HTTP 请求是否包含一个 "Body"（消息体）。
    *   **什么时候打开 (绿色)**：当你使用 `POST`、`PUT`、`PATCH` 这类需要“提交数据”的请求方法时，必须打开它。比如：
        *   `POST`：注册一个新用户，你需要提交用户名、密码。
        *   `PUT`：修改个人资料，你需要提交新的姓名、邮箱。
    *   **什么时候关闭 (灰色)**：当你使用 `GET` 或 `DELETE` 这类通常不需要提交额外数据的请求时，应该关闭它。
        *   `GET`：你只是去“拿”数据，就像在浏览器地址栏输入网址，不需要提交什么。
        *   `DELETE`：你通常只需要在 URL 里告诉服务器要删除哪个东西的 ID 即可。
### 2. `Body Content Type` (内容类型)
> [!summary] 一句话概括
> 告诉服务器，你寄来的“包裹”里面装的东西是什么格式的。
*   **来源与细节**:
    *   这里的 `JSON` 是 JavaScript Object Notation 的缩写。它是目前互联网上最流行的数据交换格式。
    *   你可以把它想象成一种用大括号 `{}` 包裹的、用`"key": "value"`（"键": "值"）形式组织的文本。非常清晰，人和机器都容易阅读。
    *   当你在下拉菜单里选择 `JSON` 时，n8n 会自动帮你添加一个重要的“信头” (Header)：`Content-Type: application/json`。这个信头就是明确告诉服务器：“嘿，我发给你的 Body 部分是 JSON 格式的，请你用 JSON 的方式来解读它。”
    *   除了 `JSON`，你可能还会看到 `Form Data` 等选项，它们是模拟传统网页表单提交的格式。但对于现代 API 来说，`JSON` 是最常用的。
### 3. `Specify Body` (指定内容方式)
> [!summary] 一句话概括
> 这里让你选择打包“包裹”的方式——是“一件一件放”还是“整个箱子直接放”。
*   **来源与细节**:
    *   n8n 提供了两种非常方便的方式让你来构建 Body 内容。
    *   **方式一: `Using Fields Below` (使用下方字段) - ** 正如你的截图所示**
        *   **比喻**: 这就像你有一个清单，然后把物品**一件一件地**放进包裹。`Name` 是物品标签，`Value` 是物品本身。
        *   **适用场景**: 当你要发送的数据结构比较简单，或者你想手动输入几个固定的字段时，这是最直观、最适合新手的方式。n8n 会在后台帮你把这些零散的字段组装成一个完整的 JSON 对象。
    *   **方式二: `From JSON Object` (使用 JSON 对象)**
        *   **比喻**: 这就像你已经把所有物品都打包在一个现成的箱子里了，现在你把**整个箱子**直接放进要寄送的大包裹里。
        *   **适用场景**: 当你要发送的数据结构很复杂，或者整个数据是从上一个节点动态传来时，这个方式更高效。你需要在一个输入框里直接写或者粘贴一个完整的 JSON 结构。
### 4. `Body Parameters` (内容参数)
> [!summary] 一句话概括
> 当你选择“一件一件放”时，这里就是你放每一件“物品”（数据）的地方。
*   **来源与细节**:
    *   这部分只有在你选择了 `Using Fields Below` 时才会出现。它是一个键值对 (Key-Value) 的列表。
    *   `Name` **(名称/键)**:
        *   这就是 JSON 里的 "key"。它必须是一个**字符串**，相当于数据的“标签”。比如 `name`, `age`, `email`。
        *   这个名称通常是由你要对接的 API 服务提供商规定好的，你需要查阅他们的文档。
    *   `Value` **(值)**:
        *   这就是 JSON 里的 "value"。它可以是多种类型的数据：
            *   **文本 (String)**: 需要用引号，但 n8n 通常会自动处理。比如 `小明`。
            *   **数字 (Number)**: 比如 `$30$` (不需要引号)。
            *   **布尔值 (Boolean)**: 只有两个值，`true` (是) 或 `false` (否)。
            *   **表达式 (Expression)**: 这是 n8n 的精髓！你可以从之前的节点动态获取值。比如，上一个节点获取了用户信息，你可以用表达式 `{{ $json.userName }}` 来填充这里。
> [!example] 实战演练：如何填写 Body Parameters
>
> **目标**：假设我们要调用一个 API 来创建一个新产品。API 文档告诉我们，需要用 `POST` 方法，并发送一个包含产品名称、价格和是否上架的 JSON 数据。
>
> **API 要求的数据格式**:
> ```json
> {
>   "product_name": "超级笔记本",
>   "price": 8999,
>   "is_published": true
> }
> ```
>
> **在 n8n 中的设置步骤**:
>
> 1.  **`Send Body` 开关**: 拨到**绿色**打开状态。
> 2.  **`Body Content Type`**: 选择 `JSON`。
> 3.  **`Specify Body`**: 选择 `Using Fields Below`。
> 4.  **`Body Parameters`**: 点击 `Add Field` (添加字段) 三次，然后像下面这样填写：
>     *   **第1个字段**:
>         *   **Name**: `product_name`
>         *   **Value**: `超级笔记本`
>     *   **第2个字段**:
>         *   **Name**: `price`
>         *   **Value**: `8999` (这里填数字，不要加引号)
>     *   **第3个字段**:
>         *   **Name**: `is_published`
>         *   **Value**: 点击输入框，选择 `Boolean` 类型，然后选择 `true`。或者直接输入 `true`。
>
> 这样设置好之后，当你执行这个节点时，n8n 就会自动帮你生成上面那个标准格式的 JSON，并发送给服务器。你就成功地“递交”了你的数据！
希望这个超级详细的拆解能帮助你彻底理解 `Send Body` 的每一个角落！