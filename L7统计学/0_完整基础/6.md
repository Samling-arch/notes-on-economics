

# 1 第五章 概率论基础

> [!NOTE] 章节提示
> 这一章和数学三里面的概率论是有所重合的。如果学得不是很明白，可以看数学三的概率论，可以完全覆盖掉这一章的内容。

## 1.1 基本概念

### 1.1.1 核心定义（可能考名词解释）

-   **随机事件 (Random Event):** 可能出现也可能不出现。
    -   *例子:* 丢骰子丢出六点。
-   **必然事件 (Certain Event):** 一定会发生。
    -   *例子:* 丢骰子的点数小于7。
-   **不可能事件 (Impossible Event):** 一定不会发生。
    -   *例子:* 丢骰子的点数大于6。

> [!IMPORTANT] 核心概念
> 这两个概念在计算中非常重要。

-   **基本事件 (Simple Event):**
    -   **定义:** 不能够再分解成两个或更多事件的事件。它是描述一个事件的一个**基本**的可能结果。
    -   **关键:** **不能够再拆分了**。
    -   *例子:*
        -   **抛硬币:** “出现正面”和“出现反面”是两个基本事件。你不能说“二分之一正面”这种。
        -   **丢骰子:** “点数为1”, “点数为2”, ..., “点数为6” 是六个基本事件。
-   **样本空间 (Sample Space):**
    -   **定义:** 将**所有**基本事件汇集成的**全体集合**。
    -   *例子:*
        -   **抛硬币:** 样本空间 $S = \{\text{正面}, \text{反面}\}$
        -   **丢骰子:** 样本空间 $S = \{1, 2, 3, 4, 5, 6\}$
    -   **注意:** 样本空间和必然事件通常用同一个字母 $S$ (或 $\Omega$) 表示，这很符合直觉，因为样本空间已经描述了所有可能情况，这和必然事件是一回事。

### 1.1.2 概率的三种定义

#### 1.1.2.1 古典定义 (适用于“古典概型”)

> [!QUOTE] 老师原话
> 这个东西虽然你可能会觉得他是脱裤子放屁，就是一句话能掰这么多，但是没办法... 他这本书就书生气太重了... 如果一旦考简答，你就不能够用这个（自己的理解）来弥补了，你得按照书上的一个规范的答法来答。

-   **适用条件 (必须同时满足):**
    1.  样本空间含有**有限**个元素。
    2.  每个基本事件发生的**可能性相同**。
-   **计算公式 (核心思想):**
    -   **通俗理解:** `概率 = 满足条件的结果数 / 所有可能的结果数`
    -   **书面定义:**
        $$ P(A) = \frac{\text{A所包含的基本事件个数}}{\text{S中基本事件的总个数}} $$

#### 1.1.2.2 统计定义 (频率近似概率)

-   **核心思想:** 用**频率的稳定值**来逼近事件的概率。
-   **原理:** 大数定律 (Law of Large Numbers)。当试验次数 $n$ 足够大以后，事件A发生的频率 $f_n(A)$ 会稳定在某个值，这个值就是事件A的概率 $P(A)$。$n$ 越大，结果越稳定，误差越小。
-   **适用场景:** 无法使用古典概型时。
-   *例子 (老师原话):*
    -   你有一个**不均匀**的硬币（比如背面放了点铅），你不知道丢出正面的概率。
    -   虽然样本空间还是 $\{\text{正面}, \text{反面}\}$，但两种结果可能性不同，不满足古典概型。
    -   **解决方法:** 重复多次试验，比如丢10000次，统计正面出现的次数，用这个**频率**来近似作为概率。

#### 1.1.2.3 主观定义

-   **适用场景:** 无法重复的实验。
-   **核心思想:** 根据以往的经验、个人理解对未来做简单预判。
-   *例子:* 投资决策，买卖股票基金。
-   **考试重要性:** 比较低，因为主观性太强。

### 1.1.3 概率计算实例

-   **例1: 丢一枚骰子，点数小于3的概率**
    -   样本空间 $S = \{1, 2, 3, 4, 5, 6\}$，共6个基本事件。
    -   事件A (点数小于3) 包含的基本事件为 $\{1, 2\}$，共2个。
    -   概率 $P(A) = 2 / 6 = 1/3$。

-   **例2: 丢两枚骰子**

> [!TIP] 老师技巧
> 千万不要用手动的罗列方法，这种看着特别麻烦，我们直接用这种**打表**的形式。一共 $6 \times 6 = 36$ 种可能。

| 骰子2\骰子1 | 1 | 2 | 3 | 4 | 5 | 6 |
| :---------: |:-:|:-:|:-:|:-:|:-:|:-:|
|      1      |1,1|1,2|1,3|1,4|1,5|1,6|
|      2      |2,1|2,2|2,3|2,4|2,5|2,6|
|      3      |3,1|3,2|3,3|3,4|3,5|3,6|
|      4      |4,1|4,2|4,3|4,4|4,5|4,6|
|      5      |5,1|5,2|5,3|5,4|5,5|5,6|
|      6      |6,1|6,2|6,3|6,4|6,5|6,6|

1.  **点数之和等于7的概率:**
    -   满足条件的组合: $(1,6), (2,5), (3,4), (4,3), (5,2), (6,1)$，共6种。
    -   概率 = $6 / 36 = 1/6$。
2.  **点数之差的绝对值等于1的概率:**
    -   满足条件的组合: $(1,2), (2,1), (2,3), (3,2), (3,4), (4,3), (4,5), (5,4), (5,6), (6,5)$，共10种。
    -   概率 = $10 / 36 = 5/18$。

---

## 1.2 离散型随机变量及其分布

### 1.2.1 随机变量 (Random Variable)

-   **引入目的:** 为了**数学处理方便和简洁**。把随机事件的结果用字母（通常是大写字母 $X, Y, \dots$）来表示，实现**数量化**。
-   *例子:*
    -   **以前:** 事件A = "丢骰子丢出三点"
    -   **现在:** 设 $X$ 为丢骰子的点数，则事件可记为 $X = 3$。
    -   **非数值结果:** 设 $X$ 为丢硬币的结果，可以进行编号：$\text{正面}=1, \text{反面}=0$。那么 "丢出正面" 就记为 $X = 1$。

-   **离散型 vs. 连续型 (可能考简答)**
    -   **离散型随机变量 (Discrete):** 取值可以**逐个列举**出来。 (如：个数、次数)
    -   **连续型随机变量 (Continuous):** 取值**无法完全列举**出来，通常是在一个区间内取任意值。(如：灯泡寿命、身高、体重)

### 1.2.2 离散型随机变量的概率分布

-   **概率分布 (Probability Distribution):** 罗列出随机变量所有可能的取值及其对应的概率。本质上就是高中学的**分布列**。

| $X$ | $x_1$ | $x_2$ | ... | $x_n$ |
|---|---|---|---|---|
| $P$ | $p_1$ | $p_2$ | ... | $p_n$ |

#### 1.2.2.1 数学期望 (Expectation)

-   **定义:**
    $$ E(X) = \sum x_i p_i $$
-   **直观理解:** 所有可能取值的**加权平均数**，权重就是其对应的概率。
-   **重要性质 (线性组合):**
    $$ E(aX + b) = aE(X) + b $$
    -   **特例1 (a=0):** $E(b) = b$ (常数的期望是它本身)
    -   **特例2 (b=0):** $E(aX) = aE(X)$

#### 1.2.2.2 方差 (Variance)

-   **定义:**
    $$ D(X) = E\left[ (X - E(X))^2 \right] $$
-   **直观理解:** 描述随机变量取值偏离其期望（均值）的程度。
-   **平方的原因:** $X - E(X)$ 的期望恒为0，正负抵消。平方可以消除负号。（用绝对值在数学上处理麻烦）
-   **重要计算公式:**
    $$ D(X) = E(X^2) - [E(X)]^2 $$
    -   **推导:**
        $$
        \begin{aligned}
        D(X) &= E\left[X^2 - 2X \cdot E(X) + (E(X))^2\right] \\
        &= E(X^2) - E[2X \cdot E(X)] + E[(E(X))^2] \\
        &= E(X^2) - 2E(X)E(X) + (E(X))^2 \quad \text{(因为E(X)是常数)} \\
        &= E(X^2) - [E(X)]^2
        \end{aligned}
        $$
-   **标准差 (Standard Deviation):** $\sigma(X) = \sqrt{D(X)}$

#### 1.2.2.3 离散系数 (Coefficient of Variation)

-   **公式:**
    $$ CV = \frac{\sigma(X)}{E(X)} $$
-   **作用:** 剔除**单位**和**数量级**（均值）不同的影响，用于比较不同数据集的离散程度。
-   **财务应用:**
    -   $E(X)$: 预期回报 (收益)
    -   $\sigma(X)$: 风险
    -   $CV$: 单位收益所承担的风险。
    -   *例子:* A股票预期回报7%，标准差5%；B股票预期回报12%，标准差7%。不能单凭标准差7% > 5%就说B风险高，因为其预期回报也高。应计算离散系数来客观比较。

---

### 1.2.3 几种重要的离散分布

#### 1.2.3.1 二项分布 (Binomial Distribution) $X \sim B(n, p)$

-   **模型:** **n重伯努利试验**
    -   **特征:**
        1.  包含 $n$ 个**相同**的试验。
        2.  每次试验只有两种结果：**成功**或**失败**。
        3.  每次试验**成功的概率 $p$ 相同**。
        4.  各次试验**相互独立**。
    -   **随机变量X的含义:** $n$ 次独立重复试验中**成功的次数**。
-   **概率函数:**
    $$ P(X = k) = C(n,k) \cdot p^k \cdot (1-p)^{n-k} = \binom{n}{k} p^k (1-p)^{n-k} $$
    -   $\binom{n}{k}$: 从 $n$ 次试验中选出 $k$ 次成功，有多少种组合方式。
    -   $p^k$: 这 $k$ 次成功的概率。
    -   $(1-p)^{n-k}$: 另外 $n-k$ 次失败的概率。
-   **期望与方差:**
    -   $E(X) = np$
    -   $D(X) = np(1-p)$

> [!TIP] 期望与方差推导 (老师板书，考试可能考)
> **期望 $E(X) = np$ 推导:**
> $$ E(X) = \sum_{k=0}^{n} k \binom{n}{k} p^k (1-p)^{n-k} $$
> (k=0时，第一项为0，所以k可以从1开始)
> $$ = \sum_{k=1}^{n} k \frac{n!}{k!(n-k)!} p^k (1-p)^{n-k} $$
> (k和k!约分)
> $$ = \sum_{k=1}^{n} \frac{n!}{(k-1)!(n-k)!} p^k (1-p)^{n-k} $$
> (提出n和p)
> $$ = np \sum_{k=1}^{n} \frac{(n-1)!}{(k-1)!(n-k)!} p^{k-1} (1-p)^{n-k} $$
> (组合数形式为 $\binom{n-1}{k-1}$)
> $$ = np \sum_{k=1}^{n} \binom{n-1}{k-1} p^{k-1} (1-p)^{(n-1)-(k-1)} $$
> (令 $t = k-1$, $m = n-1$，后面的求和是一个参数为 $m,p$ 的二项分布所有概率之和，等于1)
> $$ = np \cdot 1 = np $$
>
> **方差 $D(X) = np(1-p)$ 推导:**
> 1.  先求 $E(X^2)$。使用技巧 $k^2 = k(k-1) + k$
>     $E(X^2) = \sum k^2 P(X=k) = \sum k(k-1) P(X=k) + \sum k P(X=k)$
>     $\sum k P(X=k)$ 就是 $E(X) = np$。
> 2.  计算 $\sum_{k=2}^{n} k(k-1) \binom{n}{k} p^k (1-p)^{n-k}$
>     (k=0,1时该项为0，故k从2开始。$k(k-1)$和$k!$约分)
>     $= \sum_{k=2}^{n} \frac{n!}{(k-2)!(n-k)!} p^k (1-p)^{n-k}$
>     (提出 $n(n-1)$ 和 $p^2$)
>     $= n(n-1)p^2 \sum_{k=2}^{n} \frac{(n-2)!}{(k-2)!(n-k)!} p^{k-2} (1-p)^{n-k}$
>     (后面的求和是参数为 $n-2, p$ 的二项分布概率之和，等于1)
>     $= n(n-1)p^2$
> 3.  所以 $E(X^2) = n(n-1)p^2 + np$
> 4.  $D(X) = E(X^2) - [E(X)]^2 = (n^2p^2 - np^2 + np) - (np)^2 = np - np^2 = np(1-p)$

#### 1.2.3.2 超几何分布 (Hypergeometric Distribution)

-   **模型:** 从 $N$ 个产品中**不放回地**抽取 $n$ 个，其中 $N$ 个产品里有 $M$ 个次品，随机变量 $X$ 为抽到的**次品数**。
-   **概率函数:**
    $$ P(X=k) = \frac{\binom{M}{k} \binom{N-M}{n-k}}{\binom{N}{n}} $$
    -   $\binom{N}{n}$: 分母，总的抽法。
    -   $\binom{M}{k}$: 从 $M$ 个次品中抽 $k$ 个。
    -   $\binom{N-M}{n-k}$: 从 $N-M$ 个正品中抽 $n-k$ 个。
-   **与二项分布关系:** 如果是**放回抽样**，则为二项分布 $B(n, p)$，其中 $p = M/N$。

#### 1.2.3.3 泊松分布 (Poisson Distribution) $X \sim P(\lambda)$

-   **模型:** 描述单位时间、单位面积或单位体积内，**某事件发生的次数**。
-   *例子 (可能考选择题):*
    -   一本书一页中的印刷错误数。
    -   某地区一天内发生的交通事故数。
    -   一个放射源在单位时间内的放射粒子数。
-   **概率函数:**
    $$ P(X=k) = \frac{\lambda^k e^{-\lambda}}{k!} $$
-   **期望与方差:**
    -   $E(X) = \lambda$
    -   $D(X) = \lambda$
-   **泊松近似二项分布:**
    -   **条件:** 当二项分布中 $n$ 很大，$p$ 很小时 (老师给出参考 $n \ge 20, p \le 0.05$ 或 $np \le 5$)。
    -   **近似方法:** 令 $\lambda = np$，用泊松分布 $P(\lambda)$ 来近似计算二项分布 $B(n,p)$ 的概率。
    -   **原因:** $n$ 很大时，$\binom{n}{k}$ 和 $p^k$ 这类计算量非常恐怖，用泊松分布计算会简单很多。

---

## 1.3 连续型随机变量及其分布

### 1.3.1 密度函数 (PDF) 与 分布函数 (CDF)

-   **密度函数 $f(x)$:**
    -   **来源:** 频率分布直方图中，当组距无限小时，直方图的顶端轮廓线。
    -   **纵轴含义:** **频率 / 组距**。
    -   **直观理解:** $f(x)$ 的值越大，表示随机变量在 $x$ **附近**取值的概率越大。**注意：$f(x)$不是概率！**
    -   **性质:**
        1.  **非负性:** $f(x) \ge 0$
        2.  **正则性:** $\int_{-\infty}^{+\infty} f(x) dx = 1$ (曲线下面积为1)
-   **分布函数 $F(x)$:**
    -   **定义:** $F(x) = P(X \le x)$
    -   **与密度函数的关系:** $F'(x) = f(x)$，即 $f(x)$ 是 $F(x)$ 的导数，$F(x)$ 是 $f(x)$ 的原函数。
-   **用积分计算概率:**
    $$ P(a < X \le b) = F(b) - F(a) = \int_{a}^{b} f(x) dx $$
    -   即：变量落在某个区间的概率，等于密度函数在该区间上所围成图形的**面积**。
-   **期望与方差:**
    $$ E(X) = \int_{-\infty}^{+\infty} x f(x) dx $$
    $$ D(X) = E(X^2) - [E(X)]^2 = \int_{-\infty}^{+\infty} x^2 f(x) dx - \left[ \int_{-\infty}^{+\infty} x f(x) dx \right]^2 $$

### 1.3.2 正态分布 (Normal Distribution) $X \sim N(\mu, \sigma^2)$

-   **特征:** 呈**钟形**曲线，中间高，两边低，左右对称。
-   **重要参数:**
    -   $\mu$: **位置参数 (Location Parameter)**，决定对称轴位置，也是期望。
    -   $\sigma$: **尺度参数 (Scale Parameter)**，决定曲线的“胖瘦”。$\sigma$ 越大，曲线越**平缓（胖）**；$\sigma$ 越小，曲线越**陡峭（瘦）**。
-   **标准正态分布 $Z \sim N(0, 1)$:**
    -   $\mu=0, \sigma=1$ 的特殊正态分布。
    -   其**分布函数**记为 $\Phi(z) = P(Z \le z)$。
    -   **性质:**
        1.  $\Phi(-z) = 1 - \Phi(z)$ (由对称性得出)
        2.  $P(|Z| < c) = P(-c < Z < c) = \Phi(c) - \Phi(-c) = 2\Phi(c) - 1$
-   **变量标准化:**
    -   **目的:** 将任意正态分布 $N(\mu, \sigma^2)$ 转换为标准正态分布 $N(0, 1)$，以便查表计算。
    -   **公式:**
        $$ Z = \frac{X - \mu}{\sigma} $$

> [!example]- 计算实例
> 设 $X \sim N(108, 3^2)$, 求 $P(102 < X < 117)$
> **解:**
> $$
> \begin{aligned}
> P(102 < X < 117) &= P\left( \frac{102-108}{3} < \frac{X-108}{3} < \frac{117-108}{3} \right) \\
> &= P( -2 < Z < 3 ) \\
> &= \Phi(3) - \Phi(-2) \\
> &= \Phi(3) - (1 - \Phi(2)) \\
> &= \Phi(3) + \Phi(2) - 1
> \end{aligned}
> $$

### 1.3.3 正态分布的应用：质量管理

-   **3σ原则 (3-Sigma Rule):**
    -   对于正态分布，数值落在 $(\mu - 3\sigma, \mu + 3\sigma)$ 区间内的概率为 **99.73%**。
    -   落在区间外的概率仅为 **0.27%**，这是一个**小概率事件**。
-   **质量控制原理 (小概率准则):**
    -   **基本思想:** 在一次试验中，小概率事件是**几乎不可能发生**的。
    -   **应用:**
        1.  如果生产过程**正常**，那么抽检到的零件尺寸落在 $(\mu \pm 3\sigma)$ 之外是小概率事件。
        2.  如果在某天的抽查中，**真的发现**有零件尺寸落在了区间之外。
        3.  我们**不认为**是自己运气好碰上了这个0.27%的“幸运”事件，而是有理由**怀疑**当天的生产过程**出现了异常**。
    -   **老师的比喻:**
        -   **事出反常必有妖。**
        -   有人给你一个硬币，让你猜是正常的还是两面都是正面。你丢10次，10次都是正面。虽然正常硬币也可能出现此结果（概率为 $1/1024$），但你更倾向于相信这个硬币本身就有问题。
        -   **金钱影响判断:** 当不涉及金钱时，我们倾向于理性，认为小概率事件不会发生。但当涉及买彩票中大奖时（概率更小），我们反而潜意识会认为自己可能就是那个“天选之子”。

---

## 1.4 全章核心内容总结表

| 概念/分布                       | 核心描述 / 概率函数                                                                  | 期望 E(X)                              | 方差 D(X)                                           |
| :-------------------------- | :--------------------------------------------------------------------------- | :----------------------------------- | :------------------------------------------------ |
| **古典概型**                    | 有限个等可能基本事件                                                                   | -                                    | -                                                 |
| **离散型随机变量**                 | 所有可能取值及对应概率(分布列)                                                             | $\sum x_i p_i$                       | $E(X^2) - [E(X)]^2$                               |
| **二项分布 $B(n, p)$**          | n次独立重复试验的成功次数 <br> $P(X=k) = \binom{n}{k}p^k(1-p)^{n-k}$                     | $np$                                 | $np(1-p)$                                         |
| **超几何分布**                   | 不放回抽样中的次品数 <br> $P(X=k) = \frac{\binom{M}{k}\binom{N-M}{n-k}}{\binom{N}{n}}$ | $n\frac{M}{N}$                       | $n\frac{M}{N}(1-\frac{M}{N}) \frac{N-n}{N-1}$     |
| **泊松分布 $P(\lambda)$**       | 单位时/空内的发生次数 <br> $P(X=k) = \frac{\lambda^k e^{-\lambda}}{k!}$                | $\lambda$                            | $\lambda$                                         |
| **连续型随机变量**                 | 取值在区间内，用密度函数f(x)描述                                                           | $\int_{-\infty}^{+\infty} x f(x) dx$ | $\int_{-\infty}^{+\infty} x^2 f(x) dx - [E(X)]^2$ |
| **正态分布 $N(\mu, \sigma^2)$** | 钟形曲线，应用最广的分布                                                                 | $\mu$                                | $\sigma^2$                                        |
