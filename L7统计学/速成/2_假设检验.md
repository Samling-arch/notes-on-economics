
# 1 محاضرة 3: 假设检验

> - **来源:** [统计学期末速成/复习 归纳总结](https://www.bilibili.com/video/BV1qEqQYGEir/)
> - **UP主:** 倾铃Kfl
> - **发布时间:** 2024-12-11 20:33:47

## 1.1 一、 假设检验的定义与核心思想

- **定义**: 通过样本数据对总体参数做出推断，并判断某种假设是否成立的统计方法。
- **核心思想**: 提出两个对立的假设：**原假设 $H_0$** 和 **备择假设 $H_1$**。

> [!tip] 关键词
> - **原假设 ($H_0$)**: 通常是我们希望**推翻**的观点。
>   - **保守、默认、无效**的观点。
>   - 通常设定为“无差异”或“无效”假设。
>   - 例如：某药物无效。
> - **备择假设 ($H_1$)**: 与原假设对立的观点。
>   - **大胆**的假设，希望用强有力的数据来证明的观点。
>   - 例如：某药物有效。

- **检验过程**: 利用样本数据，计算**检验统计量**，判断是否有足够的证据**拒绝**原假设 $H_0$。

> [!important] 重要概念：接受 $H_0$
> 在假设检验中，“接受 $H_0$” 真正的意思是 “**无理由拒绝 $H_0$**”。
> 判断题：“接受表示无理由拒绝” -> 正确。

### 1.1.1 设立 H0 与 H1 的例题

#### 1.1.1.1 例题1：职工上下班平均时间
- **问题**: 抽样调查得知平均时间为 $1.2$ 小时，调查人员认为这一时间与往年**没有太大变化**。为证实此想法，原假设是什么？
- **分析**: “与往年没有太大变化”是**保守、默认**的观点。
- **设立**:
    - $H_0: \mu = 1.2$ (与往年没有变化)
    - $H_1: \mu \neq 1.2$ (有变化)

#### 1.1.1.2 例题2：广告喜好度
- **问题**: 广告商**声称**有 $30\%$ **以上**的人看过并喜欢此广告。如何设定原假设？
- **分析**: 广告商的声称是**狂妄、大胆**的，应设为备择假设 $H_1$。原假设 $H_0$ 应为**保守**的观点。
- **设立**:
    - $H_0: p \le 0.30$ (不超过 $30\%$ 的人喜欢)
    - $H_1: p > 0.30$ (超过 $30\%$ 的人喜欢)

#### 1.1.1.3 例题3：袋装食品合格率
- **问题**: 规定重量不少于 $250$ 克，若不合格率达到 $5\%$ 则不能出厂。抽样 $50$ 袋发现 $6$ 袋不合格，如何检验这批食品能否出厂？
- **分析**: 大部分情况下，食品是**可以出厂**的，这是**默认、保守**的观点。可以出厂意味着不合格率未达到 $5\%$。
- **设立**:
    - $H_0: p \le 5\%$ (不合格率在允许范围内，可以出厂)
    - $H_1: p > 5\%$ (不合格率超标，不能出厂)

## 1.2 二、 假设检验的依据与错误

### 1.2.1 小概率原理
- **定义**: 小概率事件在一次实验中**几乎不会发生**。
- **显著性水平 $\alpha$**: 事先规定的一个小概率值（如 $0.05$, $0.01$）。如果某事件发生的概率 $P \le \alpha$，就认为它是小概率事件。
- **检验逻辑**:
    1. 假设 $H_0$ 为真。
    2. 在此假设下进行一次抽样实验。
    3. 如果发生了小概率事件（即样本结果非常极端），我们就有理由**拒绝原假设 $H_0$**，接受备择假设 $H_1$。

> [!info] 知识点区分：显著性水平 $\alpha$ 的不同含义
> - **假设检验中**: $\alpha$ 与小概率事件和**第一类错误**相关，代表我们愿意承担的“弃真”风险。
> - **置信区间中**: $\alpha$ 表示**置信区间不包含总体参数的概率**。

### 1.2.2 两类错误

#### 1.2.2.1 第一类错误 (弃真错误, Type I Error)
- **定义**: 当 **$H_0$ 为真**时，我们却**拒绝了 $H_0$**。
- **发生概率**: $P(\text{犯第一类错误}) = \alpha$ (显著性水平)。
- **例子**: 药物明明无效 ($H_0$ 为真)，但检验结果却显示有效 (拒绝了 $H_0$)。

#### 1.2.2.2 第二类错误 (取伪错误, Type II Error)
- **定义**: 当 **$H_0$ 为假**时，我们却**接受了 $H_0$**。
- **发生概率**: $P(\text{犯第二类错误}) = \beta$。
- **例子**: 药物明明有效 ($H_0$ 为假)，但检验结果却显示无效 (接受了 $H_0$)。
- **图解**:
    
    当 $H_1$ 为真，但样本观测值不幸落入了 $H_0$ 的接受域（图中 $\beta$ 面积部分），就会犯第二类错误。

> [!tip] 两类错误的关系
> - 对于固定的样本容量 $n$，$\alpha$ 和 $\beta$ **呈负相关关系**。减小犯第一类错误的概率 ($\alpha$)，会增加犯第二类错误的概率 ($\beta$)。
> - 在实际操作中，我们可以通过调整显著性水平 $\alpha$ 来控制第一类错误。
> - 如果第二类错误的危害更大，可以适当增加 $\alpha$ 来降低 $\beta$。

## 1.3 三、 检验统计量与检验流程

### 1.3.1 核心概念
- **检验统计量**: 定量判断是否拒绝原假设的工具，用于衡量**样本数据和原假设之间的偏离程度**。
- **接受域**: 检验统计量落入此区域，**不能拒绝 $H_0$**。
- **拒绝域**: 检验统计量落入此区域，**拒绝 $H_0$**。
- **显著性水平 $\alpha$**: **拒绝域的总概率**。

### 1.3.2 假设检验的流程 (以药物对血压影响为例)
1.  **设立假设**:
    - $H_0: \mu = 0$ (药物对血压无影响，保守观点)
    - $H_1: \mu \neq 0$ (药物对血压有影响)
2.  **设定显著性水平 $\alpha$**:
    - 假设 $\alpha = 0.05$。这表示我们允许有 $5\%$ 的概率错误地拒绝 $H_0$。
    - 对于双侧检验，两侧拒绝域各占 $\alpha/2 = 0.025$。
3.  **计算并判断检验统计量**:
    - 计算出检验统计量的值。
    - 判断其落入**接受域**还是**拒绝域**。
    
    - **落入蓝色接受域**: 不能拒绝 $H_0$，认为药物对血压无显著影响。
    - **落入红色拒绝域**: 拒绝 $H_0$，认为药物对血压有显著影响。

## 1.4 四、 假设检验的形式与计算

### 1.4.1 检验形式

| 检验类型 | 目的 | 假设设立 | 拒绝域位置 |
| :--- | :--- | :--- | :--- |
| **双侧检验** | 检验是否**不等于**某值 | $H_0: \mu = \mu_0$ <br> $H_1: \mu \neq \mu_0$ | 两侧 |
| **左侧检验** | 检验是否**小于**某值 | $H_0: \mu \ge \mu_0$ <br> $H_1: \mu < \mu_0$ | 左侧 |
| **右侧检验** | 检验是否**大于**某值 | $H_0: \mu \le \mu_0$ <br> $H_1: \mu > \mu_0$ | 右侧 |

### 1.4.2 计算逻辑与临界值比较 (以Z检验为例)
- **核心**: 比较 `计算出的检验统计量` 和 `查表得到的临界值`，判断统计量落入哪个区域。

- **双侧检验**:
    - **比较**: `|Z|` 与临界值 `Z(α/2)`
    - **结论**:
        - 若 $|Z| < Z_{\alpha/2}$，落入接受域，**接受 $H_0$**。
        - 若 $|Z| > Z_{\alpha/2}$，落入拒绝域，**拒绝 $H_0$**。

- **左侧检验**:
    - **比较**: `Z` 与临界值 `-Z(α)`
    - **结论**:
        - 若 $Z > -Z_{\alpha}$，落入接受域，**接受 $H_0$**。
        - 若 $Z < -Z_{\alpha}$，落入拒绝域，**拒绝 $H_0$**。

- **右侧检验**:
    - **比较**: `Z` 与临界值 `Z(α)`
    - **结论**:
        - 若 $Z < Z_{\alpha}$，落入接受域，**接受 $H_0$**。
        - 若 $Z > Z_{\alpha}$，落入拒绝域，**拒绝 $H_0$**。

### 1.4.3 具体计算公式

> [!warning] 提示
> 无需掌握推导，只需熟记公式并正确使用。

- **单个总体均值检验**:
    - 总体方差 $\sigma^2$ **已知** (任何样本量): Z检验
        $$ Z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}} $$
    - 总体方差 $\sigma^2$ **未知**:
        - **大样本** ($n \ge 30$): Z检验 (用样本标准差 $s$ 代替 $\sigma$)
        - **小样本** ($n < 30$): t检验
        $$ t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}} $$
- **单个总体比例检验**: Z检验
- **单个总体方差检验**: $\chi^2$ (卡方) 检验
    $$ \chi^2 = \frac{(n-1)s^2}{\sigma_0^2} $$
- **两个总体均值之差检验**: Z检验或t检验
- **两个总体方差之比检验**: F检验
    $$ F = \frac{s_1^2}{s_2^2} $$

### 1.4.4 例题讲解

#### 1.4.4.1 例题1：单个总体方差检验
- **问题**: 正态总体，$n=25$, $\bar{x}=17$, $s^2=8$。检验假设 $H_0: \sigma^2=10$，求检验统计量。
- **分析**: 考察**单个总体方差**，$\bar{x}=17$ 是迷惑项。
- **公式**: $\chi^2 = \frac{(n-1)s^2}{\sigma_0^2}$
- **计算**:
    $$ \chi^2 = \frac{(25-1) \times 8}{10} = \frac{24 \times 8}{10} = 19.2 $$
- **答案**: 检验统计量的值为 $19.2$。

#### 1.4.4.2 例题2：单个总体均值检验 (右侧，Z检验)
- **问题**: 电子元件平均寿命 $\mu_0=1200$h，标准差 $\sigma=150$h。随机抽取 $n=20$ 个，测得 $\bar{x}=1245$h。问质量是否**显著高于**规定标准？($\alpha=0.05$)
1.  **设立假设 (右侧检验)**:
    - $H_0: \mu \le 1200$ (不显著高于标准)
    - $H_1: \mu > 1200$ (显著高于标准)
2.  **设定 $\alpha$**: $\alpha=0.05$
3.  **计算检验统计量 Z**: (总体方差已知，用Z检验)
    $$ Z = \frac{\bar{x} - \mu_0}{\sigma / \sqrt{n}} = \frac{1245 - 1200}{150 / \sqrt{20}} \approx 1.34 $$
4.  **比较与决策**:
    - 查表得右侧临界值 $Z_{0.05} = 1.645$。
    - 计算出的 $Z=1.34 < 1.645$，落入**接受域**。
- **结论**: **接受 $H_0$**，不能认为该厂生产的元件质量显著高于规定标准。

#### 1.4.4.3 例题3：单个总体均值检验 (双侧，t检验)
- **问题**: 肥皂平均厚度 $\mu_0=5$cm。随机抽取 $n=10$ 块，测得 $\bar{x}=5.3$cm, $s=0.3$cm。问机器性能是否良好？($\alpha=0.05$)
1.  **设立假设 (双侧检验)**: “性能良好”意味着厚度不过厚也不过薄。
    - $H_0: \mu = 5$ (性能良好)
    - $H_1: \mu \neq 5$ (性能不良好)
2.  **设定 $\alpha$**: $\alpha=0.05$
3.  **计算检验统计量 t**: (总体方差未知，小样本，用t检验)
    $$ t = \frac{\bar{x} - \mu_0}{s / \sqrt{n}} = \frac{5.3 - 5}{0.3 / \sqrt{10}} \approx 3.16 $$
4.  **比较与决策**:
    - 查表得双侧临界值 $t_{\alpha/2}(n-1) = t_{0.025}(9) = 2.262$。
    - 计算出的 $|t|=3.16 > 2.262$，落入**拒绝域**。
- **结论**: **拒绝 $H_0$**，认为机器性能不良好。

#### 1.4.4.4 例题4：单个总体方差检验 (左侧，$\chi^2$检验)
- **问题**: 正态总体抽取 $n=10$ 个样本，计算得 $s=15.5$。检验假设 $H_0: \sigma^2 \ge 20, H_1: \sigma^2 < 20$。($\alpha=0.05$)
1.  **设立假设 (左侧检验)**: 已给出。
2.  **设定 $\alpha$**: $\alpha=0.05$
3.  **计算检验统计量 $\chi^2$**:
    $$ \chi^2 = \frac{(n-1)s^2}{\sigma_0^2} = \frac{(10-1) \times 15.5^2}{20} = \frac{9 \times 240.25}{20} \approx 108.125 $$
4.  **比较与决策**:
    - 题目给出左侧临界值 $\chi^2_{1-\alpha}(n-1) = \chi^2_{0.95}(9) = 3.325$ (注：视频中给的临界值 $19.919$ 可能是右侧临界值，但根据其逻辑“落入右边是接受域”，我们按其思路进行)。假设临界值为 $X_c$，拒绝域为 $\chi^2 < X_c$。
    - 计算出的 $\chi^2=108.125$ 远大于临界值，落入**接受域**。
- **结论**: **接受 $H_0$**。

## 1.5 五、 P值的概念与应用
- **定义**: 当 **$H_0$ 为真**时，所观察到的样本结果或**更极端结果**出现的**概率**。
- **核心思想**:
    - P值越小，说明在 $H_0$ 成立的前提下，观测到当前样本的概率越低。
    - 根据小概率原理，如果P值很小，我们就有理由**拒绝 $H_0$**。
    - P值越小，拒绝 $H_0$ 的理由越充分。

> [!info] P值 vs 检验统计量
> - **P值**是**面积 (概率)** 的概念，与**显著性水平 $\alpha$ (面积)** 比较。
> - **检验统计量**是**横坐标上的一个点**，与**临界值 (横坐标上的点)** 比较。

### 1.5.1 P值检验原则

- **单侧检验**:
    - 若 $P > \alpha$，**不能拒绝 $H_0$**。
    - 若 $P \le \alpha$，**拒绝 $H_0$**。

- **双侧检验**:
    - 若 $P > \alpha/2$，**不能拒绝 $H_0$**。
    - 若 $P \le \alpha/2$，**拒绝 $H_0$**。
    (注：此为UP主讲述的规则，常规做法通常是将双侧P值与$\alpha$比较。)

---

## 1.6 总结：提到的问题汇总表

| 问题描述          | 考察点                   | 假设设定 ($H_0$ vs $H_1$)                          | 结论/答案                |
| :------------ | :-------------------- | :--------------------------------------------- | :------------------- |
| 1. 职工上下班平均时间  | 假设设立                  | $H_0: \mu = 1.2$ vs $H_1: \mu \neq 1.2$        | 原假设为 $\mu = 1.2$     |
| 2. 广告喜好度      | 假设设立                  | $H_0: p \le 0.30$ vs $H_1: p > 0.30$           | 原假设为 $p \le 0.30$    |
| 3. 袋装食品合格率    | 假设设立                  | $H_0: p \le 5\%$ vs $H_1: p > 5\%$             | 原假设为 $p \le 5\%$     |
| 4. 例题1：求检验统计量 | 单个总体方差检验              | $H_0: \sigma^2=10$                             | $\chi^2 = 19.2$      |
| 5. 例题2：电子元件寿命 | 单个总体均值 (右侧Z检验)        | $H_0: \mu \le 1200$ vs $H_1: \mu > 1200$       | 接受$H_0$，不能认为质量显著高于标准 |
| 6. 例题3：肥皂厚度   | 单个总体均值 (双侧t检验)        | $H_0: \mu = 5$ vs $H_1: \mu \neq 5$            | 拒绝$H_0$，认为机器性能不良好    |
| 7. 例题4：方差检验   | 单个总体方差 (左侧$\chi^2$检验) | $H_0: \sigma^2 \ge 20$ vs $H_1: \sigma^2 < 20$ | 接受$H_0$              |